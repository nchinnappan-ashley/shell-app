{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/NChinnappan/SourceAI/UI/shell-app/src/components/layout/Sidebar.tsx"],"sourcesContent":["'use client';\n\nimport React from 'react';\nimport { useRouter } from 'next/navigation';\nimport {\n  HomeIcon,\n  BuildingOfficeIcon,\n  TruckIcon,\n  CurrencyDollarIcon,\n  UserGroupIcon,\n  DocumentTextIcon,\n  CubeIcon,\n  ServerIcon,\n  PlusIcon,\n  Squares2X2Icon\n} from '@heroicons/react/24/outline';\nimport clsx from 'clsx';\n\ninterface Department {\n  id: string;\n  name: string;\n  icon: React.ComponentType<{ className?: string }>;\n  color: string;\n}\n\nconst departments: Department[] = [\n  { id: 'ashleydirect', name: 'Ashley Direct', icon: Squares2X2Icon, color: 'bg-blue-500' },\n  { id: 'ashleynet', name: 'Ashley Net', icon: BuildingOfficeIcon, color: 'bg-green-500' },\n  { id: 'supplier', name: 'Supplier', icon: TruckIcon, color: 'bg-purple-500' },\n  { id: 'finance', name: 'Finance', icon: CurrencyDollarIcon, color: 'bg-yellow-500' },\n  { id: 'hr', name: 'HR', icon: UserGroupIcon, color: 'bg-pink-500' },\n  { id: 'payroll', name: 'Payroll', icon: DocumentTextIcon, color: 'bg-indigo-500' },\n  { id: 'transportation', name: 'Transportation', icon: TruckIcon, color: 'bg-orange-500' },\n  { id: 'highjump', name: 'HighJump', icon: CubeIcon, color: 'bg-teal-500' },\n  { id: 'as400', name: 'AS400', icon: ServerIcon, color: 'bg-red-500' },\n];\n\ninterface SidebarProps {\n  selectedDepartment: string | null;\n  onDepartmentSelect: (department: string | null) => void;\n  onPlusClick?: () => void;\n}\n\nexport function Sidebar({ selectedDepartment, onDepartmentSelect, onPlusClick }: SidebarProps) {\n  const router = useRouter();\n  return (\n    <div className=\"w-16 bg-white border-r border-gray-200 flex flex-col items-center py-4 space-y-4\">\n      {/* Logo/Home */}\n      <button\n        onClick={() => { onDepartmentSelect(null); router.push('/'); }}\n        className={clsx(\n          'w-10 h-10 rounded-lg flex items-center justify-center transition-colors',\n          selectedDepartment === null \n            ? 'bg-gray-900 text-white' \n            : 'bg-gray-100 text-gray-600 hover:bg-gray-200'\n        )}\n      >\n        <HomeIcon className=\"w-5 h-5\" />\n      </button>\n\n      {/* Add New (opens recent searches) */}\n      <button\n        onClick={() => onPlusClick?.()}\n        aria-label=\"Open recent searches\"\n        className=\"w-10 h-10 rounded-lg bg-gray-100 text-gray-400 hover:bg-gray-200 hover:text-gray-600 flex items-center justify-center transition-colors\"\n      >\n        <PlusIcon className=\"w-5 h-5\" />\n      </button>\n\n      {/* Departments */}\n      <div className=\"flex flex-col space-y-3\">\n        {departments.map((dept) => {\n          const IconComponent = dept.icon;\n          return (\n            <button\n              key={dept.id}\n              onClick={() => { onDepartmentSelect(dept.id); router.push(`/apps/${dept.id}`); }}\n              className={clsx(\n                'w-10 h-10 rounded-lg flex items-center justify-center transition-colors',\n                selectedDepartment === dept.id\n                  ? `${dept.color} text-white`\n                  : 'bg-gray-100 text-gray-600 hover:bg-gray-200'\n              )}\n              title={dept.name}\n            >\n              <IconComponent className=\"w-5 h-5\" />\n            </button>\n          );\n        })}\n      </div>\n\n      {/* User Profile */}\n      <div className=\"mt-auto\">\n        <div className=\"w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white font-medium text-sm\">\n          U\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAGA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAYA;;;AAhBA;;;;AAyBA,MAAM,cAA4B;IAChC;QAAE,IAAI;QAAgB,MAAM;QAAiB,MAAM,gPAAc;QAAE,OAAO;IAAc;IACxF;QAAE,IAAI;QAAa,MAAM;QAAc,MAAM,4PAAkB;QAAE,OAAO;IAAe;IACvF;QAAE,IAAI;QAAY,MAAM;QAAY,MAAM,iOAAS;QAAE,OAAO;IAAgB;IAC5E;QAAE,IAAI;QAAW,MAAM;QAAW,MAAM,4PAAkB;QAAE,OAAO;IAAgB;IACnF;QAAE,IAAI;QAAM,MAAM;QAAM,MAAM,6OAAa;QAAE,OAAO;IAAc;IAClE;QAAE,IAAI;QAAW,MAAM;QAAW,MAAM,sPAAgB;QAAE,OAAO;IAAgB;IACjF;QAAE,IAAI;QAAkB,MAAM;QAAkB,MAAM,iOAAS;QAAE,OAAO;IAAgB;IACxF;QAAE,IAAI;QAAY,MAAM;QAAY,MAAM,8NAAQ;QAAE,OAAO;IAAc;IACzE;QAAE,IAAI;QAAS,MAAM;QAAS,MAAM,oOAAU;QAAE,OAAO;IAAa;CACrE;AAQM,SAAS,QAAQ,KAAqE;QAArE,EAAE,kBAAkB,EAAE,kBAAkB,EAAE,WAAW,EAAgB,GAArE;;IACtB,MAAM,SAAS,IAAA,kJAAS;IACxB,qBACE,6LAAC;QAAI,WAAU;;0BAEb,6LAAC;gBACC,SAAS;oBAAQ,mBAAmB;oBAAO,OAAO,IAAI,CAAC;gBAAM;gBAC7D,WAAW,IAAA,mJAAI,EACb,2EACA,uBAAuB,OACnB,2BACA;0BAGN,cAAA,6LAAC,8NAAQ;oBAAC,WAAU;;;;;;;;;;;0BAItB,6LAAC;gBACC,SAAS,IAAM,wBAAA,kCAAA;gBACf,cAAW;gBACX,WAAU;0BAEV,cAAA,6LAAC,8NAAQ;oBAAC,WAAU;;;;;;;;;;;0BAItB,6LAAC;gBAAI,WAAU;0BACZ,YAAY,GAAG,CAAC,CAAC;oBAChB,MAAM,gBAAgB,KAAK,IAAI;oBAC/B,qBACE,6LAAC;wBAEC,SAAS;4BAAQ,mBAAmB,KAAK,EAAE;4BAAG,OAAO,IAAI,CAAC,AAAC,SAAgB,OAAR,KAAK,EAAE;wBAAK;wBAC/E,WAAW,IAAA,mJAAI,EACb,2EACA,uBAAuB,KAAK,EAAE,GAC1B,AAAC,GAAa,OAAX,KAAK,KAAK,EAAC,iBACd;wBAEN,OAAO,KAAK,IAAI;kCAEhB,cAAA,6LAAC;4BAAc,WAAU;;;;;;uBAVpB,KAAK,EAAE;;;;;gBAalB;;;;;;0BAIF,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC;oBAAI,WAAU;8BAAuI;;;;;;;;;;;;;;;;;AAM9J;GAxDgB;;QACC,kJAAS;;;KADV","debugId":null}},
    {"offset": {"line": 190, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/NChinnappan/SourceAI/UI/shell-app/src/components/theme/ThemeToggle.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useEffect, useMemo, useState } from \"react\";\nimport { SunIcon, MoonIcon, ComputerDesktopIcon } from \"@heroicons/react/24/outline\";\n\n// Simple theme manager that toggles between light, dark, and system.\n// Applies the theme by setting document.documentElement.dataset.theme\n// and persists choice in localStorage under key \"theme\".\n\ntype Theme = \"light\" | \"dark\" | \"system\";\n\nfunction getSystemTheme(): \"light\" | \"dark\" {\n  if (typeof window === \"undefined\") return \"light\";\n  return window.matchMedia && window.matchMedia(\"(prefers-color-scheme: dark)\").matches\n    ? \"dark\"\n    : \"light\";\n}\n\nfunction applyTheme(theme: Theme) {\n  if (typeof document === \"undefined\") return;\n  const root = document.documentElement;\n  if (theme === \"system\") {\n    root.removeAttribute(\"data-theme\");\n    // Let system take over; set color-scheme to current system for better native UI\n    const cs = getSystemTheme();\n    root.style.colorScheme = cs;\n  } else {\n    root.setAttribute(\"data-theme\", theme);\n    root.style.colorScheme = theme;\n  }\n}\n\n// Brand color selection\ntype Color = \"blue\" | \"emerald\" | \"violet\";\n\nfunction applyColor(color: Color) {\n  if (typeof document === \"undefined\") return;\n  const root = document.documentElement;\n  root.setAttribute(\"data-color\", color);\n}\n\n\nexport function ThemeToggle() {\n  const [theme, setTheme] = useState<Theme>(\"system\");\n  const [color, setColor] = useState<Color>(\"blue\");\n\n  const [open, setOpen] = useState(false);\n  const rootRef = React.useRef<HTMLDivElement | null>(null);\n  const [mounted, setMounted] = useState(false);\n\n  // On mount, read stored preference and apply\n  useEffect(() => {\n    try {\n      const storedTheme = (localStorage.getItem(\"theme\") as Theme | null) ?? \"system\";\n      const storedColor = (localStorage.getItem(\"color\") as Color | null) ?? \"blue\";\n      setTheme(storedTheme);\n      setColor(storedColor);\n      applyTheme(storedTheme);\n      applyColor(storedColor);\n    } catch {\n      // ignore\n    }\n  }, []);\n\n  // mark mounted to avoid SSR/CSR mismatch\n  useEffect(() => { setMounted(true); }, []);\n\n  // If user chooses system, reflect live system changes in the icon after mount\n  const systemTheme = useMemo(() => (typeof window !== \"undefined\" ? getSystemTheme() : \"light\"), []);\n  useEffect(() => {\n    if (!mounted) return;\n    if (theme !== \"system\" || typeof window === \"undefined\") return;\n    const mq = window.matchMedia(\"(prefers-color-scheme: dark)\");\n    const onChange = () => applyTheme(\"system\");\n    mq.addEventListener?.('change', onChange);\n    return () => mq.removeEventListener?.('change', onChange);\n  }, [theme, mounted]);\n\n  // Close popover when clicking outside\n  useEffect(() => {\n    const onDown = (e: MouseEvent) => {\n      if (!rootRef.current) return;\n      if (!rootRef.current.contains(e.target as Node)) setOpen(false);\n    };\n    document.addEventListener('mousedown', onDown);\n    return () => document.removeEventListener('mousedown', onDown);\n  }, []);\n\n\n  const shown: \"light\" | \"dark\" = mounted ? (theme === \"system\" ? getSystemTheme() : theme) : \"light\";\n\n  const cycle = () => {\n    const next: Theme = theme === \"light\" ? \"dark\" : theme === \"dark\" ? \"system\" : \"light\";\n    setTheme(next);\n    try {\n      localStorage.setItem(\"theme\", next);\n    } catch {}\n    applyTheme(next);\n  };\n\n  const Icon = shown === \"dark\" ? MoonIcon : shown === \"light\" ? SunIcon : ComputerDesktopIcon;\n  const label = theme === \"system\" ? `System (${shown})` : shown === \"dark\" ? \"Dark\" : \"Light\";\n\n  const choose = (c: Color) => {\n    setColor(c);\n    try { localStorage.setItem(\"color\", c); } catch {}\n    applyColor(c);\n  };\n\n  return (\n    <div ref={rootRef} className=\"relative\">\n      <button\n        type=\"button\"\n        aria-label={`Theme: ${label} (click to open color picker)`}\n        title={`Theme: ${label}`}\n        onClick={() => setOpen((v) => !v)}\n        className=\"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors\"\n      >\n        <Icon className=\"w-5 h-5\" />\n      </button>\n      {open && (\n        <div className=\"absolute right-0 top-10 z-50 bg-white/95 dark:bg-slate-900/95 border border-gray-200/70 dark:border-gray-700/60 rounded-lg shadow-lg p-2 flex items-center gap-2 backdrop-blur-sm\">\n          <button\n            type=\"button\"\n            onClick={() => { choose('blue'); setOpen(false); }}\n            aria-label=\"Blue theme\"\n            className={`h-6 w-6 rounded-full ring-2 ring-offset-1 ${color === 'blue' ? 'ring-gray-400' : 'ring-transparent'}`}\n            style={{ backgroundColor: '#3b82f6' }}\n          />\n          <button\n            type=\"button\"\n            onClick={() => { choose('emerald'); setOpen(false); }}\n            aria-label=\"Emerald theme\"\n            className={`h-6 w-6 rounded-full ring-2 ring-offset-1 ${color === 'emerald' ? 'ring-gray-400' : 'ring-transparent'}`}\n            style={{ backgroundColor: '#10b981' }}\n          />\n          <button\n            type=\"button\"\n            onClick={() => { choose('violet'); setOpen(false); }}\n            aria-label=\"Violet theme\"\n            className={`h-6 w-6 rounded-full ring-2 ring-offset-1 ${color === 'violet' ? 'ring-gray-400' : 'ring-transparent'}`}\n            style={{ backgroundColor: '#8b5cf6' }}\n          />\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default ThemeToggle;\n\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 415, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/NChinnappan/SourceAI/UI/shell-app/src/components/layout/Header.tsx"],"sourcesContent":["'use client';\n\nimport React from 'react';\nimport Image from 'next/image';\nimport {\n  MagnifyingGlassIcon,\n  BellIcon,\n  Cog6ToothIcon\n} from '@heroicons/react/24/outline';\nimport { ThemeToggle } from '../theme/ThemeToggle';\n\nexport function Header() {\n  return (\n    <header className=\"h-16 bg-white border-b border-gray-200 flex items-center justify-between px-6\">\n      {/* Left spacer (search removed per request) */}\n      <div className=\"flex-1\" />\n\n      {/* Right Side Actions */}\n      <div className=\"flex items-center space-x-4\">\n        {/* Notifications */}\n        <button className=\"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors\">\n          <BellIcon className=\"w-5 h-5\" />\n        </button>\n\n        {/* Theme */}\n        <ThemeToggle />\n\n        {/* Settings */}\n        <button className=\"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors\">\n          <Cog6ToothIcon className=\"w-5 h-5\" />\n        </button>\n\n        {/* Ashley logo icon */}\n        <div className=\"h-8 w-auto flex items-center\">\n          <Image\n            src=\"/AshleyLogoLLCOrangeBlack.png\"\n            alt=\"Ashley\"\n            width={104}\n            height={32}\n            priority\n          />\n        </div>\n      </div>\n    </header>\n  );\n}\n"],"names":[],"mappings":";;;;;AAGA;AACA;AAAA;AAKA;AATA;;;;;AAWO,SAAS;IACd,qBACE,6LAAC;QAAO,WAAU;;0BAEhB,6LAAC;gBAAI,WAAU;;;;;;0BAGf,6LAAC;gBAAI,WAAU;;kCAEb,6LAAC;wBAAO,WAAU;kCAChB,cAAA,6LAAC,8NAAQ;4BAAC,WAAU;;;;;;;;;;;kCAItB,6LAAC,4JAAW;;;;;kCAGZ,6LAAC;wBAAO,WAAU;kCAChB,cAAA,6LAAC,6OAAa;4BAAC,WAAU;;;;;;;;;;;kCAI3B,6LAAC;wBAAI,WAAU;kCACb,cAAA,6LAAC,2IAAK;4BACJ,KAAI;4BACJ,KAAI;4BACJ,OAAO;4BACP,QAAQ;4BACR,QAAQ;;;;;;;;;;;;;;;;;;;;;;;AAMpB;KAlCgB","debugId":null}},
    {"offset": {"line": 520, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/NChinnappan/SourceAI/UI/shell-app/src/utils/searchHistory.ts"],"sourcesContent":["\"use client\";\n\n// Simple localStorage-backed search history tracker\n// Stores up to 10 entries, most recent first. Dedupes by app id (or query if id missing).\n\nexport type SearchHistoryItem = {\n  id?: string;         // app id if known\n  title?: string;      // app title if known\n  query: string;       // raw query typed/spoken\n  path?: string;       // navigation path to execute (e.g. /apps/{id})\n  ts: number;          // timestamp ms\n  count: number;       // times used\n};\n\nconst STORAGE_KEY = \"search_history_v1\";\n\nexport function readHistory(): SearchHistoryItem[] {\n  if (typeof window === \"undefined\") return [];\n  try {\n    const raw = localStorage.getItem(STORAGE_KEY);\n    if (!raw) return [];\n    const arr = JSON.parse(raw) as SearchHistoryItem[];\n    if (!Array.isArray(arr)) return [];\n    return arr;\n  } catch {\n    return [];\n  }\n}\n\nfunction writeHistory(items: SearchHistoryItem[]) {\n  if (typeof window === \"undefined\") return;\n  try {\n    localStorage.setItem(STORAGE_KEY, JSON.stringify(items.slice(0, 10)));\n  } catch {\n    // ignore\n  }\n}\n\nexport function recordSearch(entry: Omit<SearchHistoryItem, \"ts\" | \"count\">) {\n  const prev = readHistory();\n  const ts = Date.now();\n  // Try to match by id first, else by query\n  const idx = prev.findIndex((it) => (entry.id && it.id === entry.id) || (!entry.id && it.query.toLowerCase() === entry.query.toLowerCase()));\n  if (idx >= 0) {\n    const existing = prev[idx];\n    const updated: SearchHistoryItem = {\n      ...existing,\n      ...entry,\n      ts,\n      count: (existing.count || 0) + 1,\n    };\n    const reordered = [updated, ...prev.filter((_, i) => i !== idx)];\n    writeHistory(reordered);\n    return;\n  }\n  const next: SearchHistoryItem = { ...entry, ts, count: 1 };\n  const list = [next, ...prev].sort((a, b) => b.ts - a.ts).slice(0, 10);\n  writeHistory(list);\n}\n\nexport function clearHistory() {\n  writeHistory([]);\n}\n\n"],"names":[],"mappings":";;;;;;;;AAAA;AAcA,MAAM,cAAc;AAEb,SAAS;IACd;;IACA,IAAI;QACF,MAAM,MAAM,aAAa,OAAO,CAAC;QACjC,IAAI,CAAC,KAAK,OAAO,EAAE;QACnB,MAAM,MAAM,KAAK,KAAK,CAAC;QACvB,IAAI,CAAC,MAAM,OAAO,CAAC,MAAM,OAAO,EAAE;QAClC,OAAO;IACT,EAAE,UAAM;QACN,OAAO,EAAE;IACX;AACF;AAEA,SAAS,aAAa,KAA0B;IAC9C;;IACA,IAAI;QACF,aAAa,OAAO,CAAC,aAAa,KAAK,SAAS,CAAC,MAAM,KAAK,CAAC,GAAG;IAClE,EAAE,UAAM;IACN,SAAS;IACX;AACF;AAEO,SAAS,aAAa,KAA8C;IACzE,MAAM,OAAO;IACb,MAAM,KAAK,KAAK,GAAG;IACnB,0CAA0C;IAC1C,MAAM,MAAM,KAAK,SAAS,CAAC,CAAC,KAAO,AAAC,MAAM,EAAE,IAAI,GAAG,EAAE,KAAK,MAAM,EAAE,IAAM,CAAC,MAAM,EAAE,IAAI,GAAG,KAAK,CAAC,WAAW,OAAO,MAAM,KAAK,CAAC,WAAW;IACvI,IAAI,OAAO,GAAG;QACZ,MAAM,WAAW,IAAI,CAAC,IAAI;QAC1B,MAAM,UAA6B;YACjC,GAAG,QAAQ;YACX,GAAG,KAAK;YACR;YACA,OAAO,CAAC,SAAS,KAAK,IAAI,CAAC,IAAI;QACjC;QACA,MAAM,YAAY;YAAC;eAAY,KAAK,MAAM,CAAC,CAAC,GAAG,IAAM,MAAM;SAAK;QAChE,aAAa;QACb;IACF;IACA,MAAM,OAA0B;QAAE,GAAG,KAAK;QAAE;QAAI,OAAO;IAAE;IACzD,MAAM,OAAO;QAAC;WAAS;KAAK,CAAC,IAAI,CAAC,CAAC,GAAG,IAAM,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,KAAK,CAAC,GAAG;IAClE,aAAa;AACf;AAEO,SAAS;IACd,aAAa,EAAE;AACjB","debugId":null}},
    {"offset": {"line": 593, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/NChinnappan/SourceAI/UI/shell-app/src/components/layout/AshleyNews.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useEffect, useMemo, useRef, useState } from 'react';\nimport { NewspaperIcon, ChevronLeftIcon, ChevronRightIcon } from '@heroicons/react/24/outline';\n\nexport type NewsItem = {\n  id: string;\n  title: string;\n  summary: string;\n  date: string; // ISO or readable\n  tag?: string;\n  href?: string;\n  image?: string; // optional thumbnail\n};\n\nconst sampleNews: NewsItem[] = [\n  {\n    id: 'n1',\n    title: 'Ashley opens new distribution center',\n    summary: 'Increasing capacity and improving lead times for the Southeast region.',\n    date: '2025-08-12',\n    tag: 'Logistics',\n    image: 'https://images.unsplash.com/photo-1556125574-d7f27ec36a06?q=80&w=800&auto=format&fit=crop',\n  },\n  {\n    id: 'n2',\n    title: 'Ashley Direct adds real-time order tracking',\n    summary: 'Track shipments end-to-end with enhanced visibility and alerts.',\n    date: '2025-07-30',\n    tag: 'Product',\n    image: 'https://images.unsplash.com/photo-1529070538774-1843cb3265df?q=80&w=800&auto=format&fit=crop',\n  },\n  {\n    id: 'n3',\n    title: 'Sustainability milestone achieved',\n    summary: 'Manufacturing plants reduce emissions by 18% YoY with new initiatives.',\n    date: '2025-07-05',\n    tag: 'Sustainability',\n    image: 'https://images.unsplash.com/photo-1500530855697-b586d89ba3ee?q=80&w=800&auto=format&fit=crop',\n  },\n  {\n    id: 'n4',\n    title: 'New showroom grand opening',\n    summary: 'Celebrating a new retail presence with community events and offers.',\n    date: '2025-08-02',\n    tag: 'Retail',\n    image: 'https://images.unsplash.com/photo-1494438639946-1ebd1d20bf85?q=80&w=800&auto=format&fit=crop',\n  },\n];\n\nexport default function AshleyNews({ items = sampleNews }: { items?: NewsItem[] }) {\n  const scrollerRef = useRef<HTMLDivElement>(null);\n\n  const [data, setData] = useState<NewsItem[]>(items);\n  const [loading, setLoading] = useState(false);\n  const [mounted, setMounted] = useState(false);\n  useEffect(() => setMounted(true), []);\n  const formatDate = (d: string) => {\n    try {\n      const dt = new Date(d);\n      return mounted ? dt.toLocaleDateString('en-US', { year: 'numeric', month: 'short', day: 'numeric' }) : dt.toISOString().slice(0, 10);\n    } catch { return d; }\n  };\n  const cards = useMemo(() => data, [data]);\n\n  // Fetch live Ashley news (WordPress listing)\n  useEffect(() => {\n    let cancelled = false;\n    (async () => {\n      try {\n        setLoading(true);\n        const url = encodeURIComponent('https://ashley.biz/news/page/2/');\n        const res = await fetch(`/api/news?url=${url}`, { cache: 'no-store' });\n        const json = await res.json().catch(() => ({ ok: false }));\n        if (!cancelled && json?.ok && Array.isArray(json.items) && json.items.length) {\n          setData(json.items);\n        }\n      } catch {\n        // keep sample fallback\n      } finally {\n        if (!cancelled) setLoading(false);\n      }\n    })();\n    return () => { cancelled = true; };\n  }, []);\n\n  const scrollBy = (dir: 1 | -1) => {\n    const el = scrollerRef.current;\n    if (!el) return;\n    const card = el.querySelector<HTMLElement>('[data-card]');\n    const delta = (card?.offsetWidth || 280) + 12; // width + gap\n    el.scrollBy({ left: dir * delta, behavior: 'smooth' });\n  };\n\n  useEffect(() => {\n    const el = scrollerRef.current;\n    if (!el) return;\n    let i = 0;\n    const timer = setInterval(() => {\n      if (!document.hidden) {\n        i = (i + 1) % (cards.length || 1);\n        const card = el.querySelector<HTMLElement>('[data-card]');\n        const delta = (card?.offsetWidth || 280) + 12;\n        el.scrollBy({ left: delta, behavior: 'smooth' });\n        // If near end, snap back to start\n        if (el.scrollLeft + el.clientWidth >= el.scrollWidth - delta) {\n          setTimeout(() => el.scrollTo({ left: 0, behavior: 'smooth' }), 400);\n        }\n      }\n    }, 9000);\n    return () => clearInterval(timer);\n  }, [cards.length]);\n\n  // Smoove-like 3D reveal for cards in horizontal scroller\n  useEffect(() => {\n    const root = scrollerRef.current;\n    if (!root) return;\n    const els = Array.from(root.querySelectorAll('[data-reveal]')) as HTMLElement[];\n    const io = new IntersectionObserver((entries) => {\n      entries.forEach((entry) => {\n        const el = entry.target as HTMLElement;\n        if (entry.isIntersecting) {\n          el.classList.add('smoove-in');\n          el.classList.remove('smoove-init');\n          io.unobserve(el);\n        }\n      });\n    }, { root, threshold: 0.2, rootMargin: '0px 10% -5% 10%' });\n    els.forEach((el, idx) => {\n      (el.style as any).transitionDelay = `${(idx % 6) * 50}ms`;\n      io.observe(el);\n    });\n    return () => io.disconnect();\n  }, [cards]);\n\n  return (\n    <section className=\"mt-2\">\n      <div className=\"flex items-center justify-between px-1 sm:px-2 mb-2\">\n        <div className=\"flex items-center gap-2\">\n          <div className=\"w-7 h-7 rounded-lg brand-soft brand-text flex items-center justify-center\">\n            <NewspaperIcon className=\"w-4 h-4\" />\n          </div>\n          <h3 className=\"text-sm font-semibold\" style={{ color: '#0f172a' }}>Ashley News</h3>\n        </div>\n        <div className=\"flex items-center gap-1\">\n          <button onClick={() => scrollBy(-1)} className=\"p-1 rounded-md hover:bg-gray-100\">\n            <ChevronLeftIcon className=\"w-4 h-4 text-gray-600\" />\n          </button>\n          <button onClick={() => scrollBy(1)} className=\"p-1 rounded-md hover:bg-gray-100\">\n            <ChevronRightIcon className=\"w-4 h-4 text-gray-600\" />\n          </button>\n        </div>\n      </div>\n\n      <div\n        ref={scrollerRef}\n        className=\"relative flex gap-3 overflow-x-auto pb-2 snap-x snap-mandatory scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-transparent\"\n        style={{ scrollBehavior: 'smooth', perspective: '1000px' }}\n      >\n        {cards.map((n, i) => (\n          <a\n            key={n.id}\n            href={n.href || '#'}\n            data-reveal\n            data-3d={(i % 2) ? 'right' : 'left'}\n            className=\"group min-w-[240px] sm:min-w-[280px] max-w-[280px] snap-start bg-white rounded-xl shadow-sm ring-1 ring-gray-200/70 hover:shadow-md hover:-translate-y-0.5 transition-all duration-500 will-change-transform smoove-init\"\n            data-card\n          >\n            <div className=\"relative h-36 w-full overflow-hidden rounded-t-xl\">\n              {n.image ? (\n                // eslint-disable-next-line @next/next/no-img-element\n                <img src={n.image} alt=\"\" className=\"w-full h-full object-cover group-hover:scale-105 transition-transform duration-700\" />\n              ) : (\n                <div className=\"w-full h-full brand-soft\" />\n              )}\n              {n.tag && (\n                <span className=\"absolute top-2 left-2 text-[10px] px-2 py-0.5 rounded-full bg-white/80 backdrop-blur border border-white/60 text-gray-700\">\n                  {n.tag}\n                </span>\n              )}\n            </div>\n            <div className=\"px-3 py-2\">\n              <div className=\"flex items-center justify-between gap-2\">\n                <h4 className=\"text-sm font-medium text-gray-900 line-clamp-2\">{n.title}</h4>\n                <span className=\"text-[10px] text-gray-500 shrink-0\">{formatDate(n.date)}</span>\n              </div>\n              <p className=\"text-xs text-gray-600 mt-1 line-clamp-2\">{n.summary}</p>\n            </div>\n          </a>\n        ))}\n      </div>\n\n      <style jsx>{`\n        [data-reveal] { transform-origin: center; opacity: 0; transform-style: preserve-3d; }\n        [data-reveal].smoove-in { opacity: 1; transform: translate3d(0,0,0) rotateX(0) rotateY(0) rotateZ(0) scale(1); }\n        [data-reveal].smoove-init[data-3d=\"left\"]  { transform: translate3d(-40px, 0, -60px) rotateY(12deg) rotateZ(-1deg); }\n        [data-reveal].smoove-init[data-3d=\"right\"] { transform: translate3d(40px, 0, -60px) rotateY(-12deg) rotateZ(1deg); }\n      `}</style>\n    </section>\n  );\n}\n\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 992, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/NChinnappan/SourceAI/UI/shell-app/src/components/layout/ServiceNowIncidents.tsx"],"sourcesContent":["\"use client\";\n\nimport React from \"react\";\nimport { ExclamationTriangleIcon, ArrowUpIcon, MinusIcon, ArrowDownIcon } from \"@heroicons/react/24/solid\";\n\ntype Incident = {\n  id: string;\n  title: string;\n  status: \"In Progress\" | \"New\" | \"Resolved\";\n  priority: \"high\" | \"medium\" | \"low\";\n};\n\nconst incidents: Incident[] = [\n  { id: \"INC0010045\", title: \"Email service experiencing delays\", status: \"In Progress\", priority: \"high\" },\n  { id: \"INC0010042\", title: \"Cannot access shared network drive\", status: \"New\", priority: \"medium\" },\n  { id: \"INC0010039\", title: \"Printer on 4th floor is offline\", status: \"Resolved\", priority: \"low\" },\n];\n\nfunction StatusBadge({ status }: { status: Incident[\"status\"] }) {\n  const map = {\n    \"In Progress\": \"bg-amber-100 text-amber-800\",\n    \"New\": \"bg-blue-100 text-blue-800\",\n    \"Resolved\": \"bg-emerald-100 text-emerald-800\",\n  } as const;\n  return (\n    <span className={`inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold ${map[status]}`}>{status}</span>\n  );\n}\n\nfunction PriorityIcon({ p }: { p: Incident[\"priority\"] }) {\n  if (p === \"high\") return <ArrowUpIcon className=\"w-4 h-4 text-rose-500\" />;\n  if (p === \"medium\") return <MinusIcon className=\"w-4 h-4 text-amber-500\" />;\n  return <ArrowDownIcon className=\"w-4 h-4 text-emerald-500\" />;\n}\n\nexport default function ServiceNowIncidents() {\n  return (\n    <section aria-label=\"ServiceNow Incidents\" className=\"mt-6\">\n      <div className=\"bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden\">\n        {/* Header */}\n        <div className=\"flex items-center gap-2 px-5 pt-5\">\n          <span className=\"inline-flex items-center justify-center w-7 h-7 rounded-full bg-rose-100 text-rose-600\">\n            <ExclamationTriangleIcon className=\"w-4 h-4\" />\n          </span>\n          <h3 className=\"text-lg font-semibold text-gray-900\">ServiceNow Incidents</h3>\n        </div>\n\n        {/* Table */}\n        <div className=\"px-5 pb-5\">\n          <div className=\"mt-4 overflow-x-auto\">\n            <table className=\"w-full table-fixed text-sm\">\n              <thead>\n                <tr className=\"text-left text-gray-500\">\n                  <th className=\"w-24 pb-2 font-medium\">Priority</th>\n                  <th className=\"w-36 pb-2 font-medium\">ID</th>\n                  <th className=\"pb-2 font-medium\">Title</th>\n                  <th className=\"w-40 pb-2 font-medium text-right\">Status</th>\n                </tr>\n              </thead>\n              <tbody>\n                {incidents.map((inc, idx) => (\n                  <tr key={inc.id} className={idx !== incidents.length - 1 ? \"border-t border-gray-100\" : \"border-t border-gray-100\"}>\n                    <td className=\"py-3\">\n                      <PriorityIcon p={inc.priority} />\n                    </td>\n                    <td className=\"py-3 text-[13px] text-gray-600\">{inc.id}</td>\n                    <td className=\"py-3 text-gray-900\">{inc.title}</td>\n                    <td className=\"py-3 text-right\">\n                      <StatusBadge status={inc.status} />\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n        </div>\n      </div>\n    </section>\n  );\n}\n\n"],"names":[],"mappings":";;;;;AAGA;AAAA;AAAA;AAAA;AAHA;;;AAYA,MAAM,YAAwB;IAC5B;QAAE,IAAI;QAAc,OAAO;QAAqC,QAAQ;QAAe,UAAU;IAAO;IACxG;QAAE,IAAI;QAAc,OAAO;QAAsC,QAAQ;QAAO,UAAU;IAAS;IACnG;QAAE,IAAI;QAAc,OAAO;QAAmC,QAAQ;QAAY,UAAU;IAAM;CACnG;AAED,SAAS,YAAY,KAA0C;QAA1C,EAAE,MAAM,EAAkC,GAA1C;IACnB,MAAM,MAAM;QACV,eAAe;QACf,OAAO;QACP,YAAY;IACd;IACA,qBACE,6LAAC;QAAK,WAAW,AAAC,yEAAoF,OAAZ,GAAG,CAAC,OAAO;kBAAK;;;;;;AAE9G;KATS;AAWT,SAAS,aAAa,KAAkC;QAAlC,EAAE,CAAC,EAA+B,GAAlC;IACpB,IAAI,MAAM,QAAQ,qBAAO,6LAAC,qOAAW;QAAC,WAAU;;;;;;IAChD,IAAI,MAAM,UAAU,qBAAO,6LAAC,+NAAS;QAAC,WAAU;;;;;;IAChD,qBAAO,6LAAC,2OAAa;QAAC,WAAU;;;;;;AAClC;MAJS;AAMM,SAAS;IACtB,qBACE,6LAAC;QAAQ,cAAW;QAAuB,WAAU;kBACnD,cAAA,6LAAC;YAAI,WAAU;;8BAEb,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BAAK,WAAU;sCACd,cAAA,6LAAC,yQAAuB;gCAAC,WAAU;;;;;;;;;;;sCAErC,6LAAC;4BAAG,WAAU;sCAAsC;;;;;;;;;;;;8BAItD,6LAAC;oBAAI,WAAU;8BACb,cAAA,6LAAC;wBAAI,WAAU;kCACb,cAAA,6LAAC;4BAAM,WAAU;;8CACf,6LAAC;8CACC,cAAA,6LAAC;wCAAG,WAAU;;0DACZ,6LAAC;gDAAG,WAAU;0DAAwB;;;;;;0DACtC,6LAAC;gDAAG,WAAU;0DAAwB;;;;;;0DACtC,6LAAC;gDAAG,WAAU;0DAAmB;;;;;;0DACjC,6LAAC;gDAAG,WAAU;0DAAmC;;;;;;;;;;;;;;;;;8CAGrD,6LAAC;8CACE,UAAU,GAAG,CAAC,CAAC,KAAK,oBACnB,6LAAC;4CAAgB,WAAW,QAAQ,UAAU,MAAM,GAAG,IAAI,6BAA6B;;8DACtF,6LAAC;oDAAG,WAAU;8DACZ,cAAA,6LAAC;wDAAa,GAAG,IAAI,QAAQ;;;;;;;;;;;8DAE/B,6LAAC;oDAAG,WAAU;8DAAkC,IAAI,EAAE;;;;;;8DACtD,6LAAC;oDAAG,WAAU;8DAAsB,IAAI,KAAK;;;;;;8DAC7C,6LAAC;oDAAG,WAAU;8DACZ,cAAA,6LAAC;wDAAY,QAAQ,IAAI,MAAM;;;;;;;;;;;;2CAP1B,IAAI,EAAE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkBjC;MA5CwB","debugId":null}},
    {"offset": {"line": 1257, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/NChinnappan/SourceAI/UI/shell-app/src/components/layout/AdCarousel.tsx"],"sourcesContent":["\"use client\";\n\nimport React from \"react\";\n\nexport type AdItem = {\n  id: string;\n  title: string;\n  href?: string;\n  logo?: string; // remote image url; if missing we show initials\n};\n\nconst SAMPLE_ADS: AdItem[] = [\n  { id: \"a1\", title: \"Ashley Direct\", href: \"https://www.ashleyfurniture.com/\" , logo: \"https://upload.wikimedia.org/wikipedia/commons/thumb/9/95/Ashley_Furniture_Industries_logo.svg/512px-Ashley_Furniture_Industries_logo.svg.png\"},\n  { id: \"a2\", title: \"Logistics Pro\", href: \"#\" },\n  { id: \"a3\", title: \"FleetTrack\", href: \"#\" },\n  { id: \"a4\", title: \"Coastal Shipping\", href: \"#\" },\n  { id: \"a5\", title: \"Green Fabric\", href: \"#\" },\n  { id: \"a6\", title: \"RetailHub\", href: \"#\" },\n  { id: \"a7\", title: \"Insight BI\", href: \"#\" },\n  { id: \"a8\", title: \"Cloud ERP\", href: \"#\" },\n];\n\nfunction Initials({ text }: { text: string }) {\n  const initials = text.split(\" \").map(w => w[0]).join(\"\").slice(0,3).toUpperCase();\n  return (\n    <div className=\"w-24 h-12 rounded-md brand-soft brand-text flex items-center justify-center text-sm font-semibold\">\n      {initials}\n    </div>\n  );\n}\n\nfunction Row({ items, reverse = false, duration = 40 }: { items: AdItem[]; reverse?: boolean; duration?: number }) {\n  return (\n    <div className={`marquee ${reverse ? \"marquee-reverse\" : \"\"}`} style={{ ['--duration' as any]: `${duration}s` }}>\n      <ul className=\"marquee-content\">\n        {items.map((ad) => (\n          <li key={ad.id} className=\"ad-item\">\n            <a href={ad.href || '#'} target=\"_blank\" rel=\"noreferrer\" className=\"ad-card\">\n              <div className=\"logo-wrap\">\n                {ad.logo ? (\n                  // eslint-disable-next-line @next/next/no-img-element\n                  <img src={ad.logo} alt={ad.title} className=\"logo-img\"/>\n                ) : (\n                  <Initials text={ad.title} />\n                )}\n              </div>\n              <div className=\"title\">{ad.title}</div>\n            </a>\n          </li>\n        ))}\n        {/* duplicate for seamless loop */}\n        {items.map((ad) => (\n          <li key={`dupe-${ad.id}`} className=\"ad-item\">\n            <a href={ad.href || '#'} target=\"_blank\" rel=\"noreferrer\" className=\"ad-card\">\n              <div className=\"logo-wrap\">\n                {ad.logo ? (\n                  // eslint-disable-next-line @next/next/no-img-element\n                  <img src={ad.logo} alt={ad.title} className=\"logo-img\"/>\n                ) : (\n                  <Initials text={ad.title} />\n                )}\n              </div>\n              <div className=\"title\">{ad.title}</div>\n            </a>\n          </li>\n        ))}\n      </ul>\n      <style jsx>{`\n        .marquee { --gap: 0.75rem; display: grid; grid-auto-flow: column; overflow: hidden; mask-image: linear-gradient(to right, transparent, black 8%, black 92%, transparent); }\n        .marquee:hover .marquee-content { animation-play-state: paused; }\n        .marquee-content { display: flex; align-items: center; gap: var(--gap); min-width: max-content; animation: scroll var(--duration, 40s) linear infinite; }\n        .marquee-reverse .marquee-content { animation-direction: reverse; }\n        .ad-item { list-style: none; }\n        .ad-card { display: flex; align-items: center; gap: 0.5rem; background: white; border-radius: 0.75rem; padding: 0.5rem 0.75rem; box-shadow: 0 1px 2px rgba(0,0,0,0.04); border: 1px solid rgba(0,0,0,0.08); transition: transform .3s ease, box-shadow .3s ease, border-color .3s ease; }\n        .ad-card:hover { transform: translateY(-2px); box-shadow: 0 6px 16px rgba(0,0,0,0.08); border-color: rgba(0,0,0,0.12); }\n        .logo-wrap { width: 96px; height: 48px; display: flex; align-items: center; justify-content: center; overflow: hidden; border-radius: 0.5rem; background: rgba(0,0,0,0.02); }\n        .logo-img { width: 100%; height: 100%; object-fit: contain; object-position: center; filter: saturate(1.1); transition: transform .5s ease; }\n        .ad-card:hover .logo-img { transform: scale(1.03); }\n        .title { font-size: 12px; color: #0f172a; white-space: nowrap; }\n        @keyframes scroll { to { transform: translateX(-50%); } }\n      `}</style>\n    </div>\n  );\n}\n\nexport default function AdCarousel({ items = SAMPLE_ADS }: { items?: AdItem[] }) {\n  return (\n    <section className=\"mt-14\">\n      <div className=\"flex items-center justify-between mb-3 px-1 sm:px-2\">\n        <h3 className=\"text-sm font-semibold\" style={{ color: '#0f172a' }}>External Ads</h3>\n        <span className=\"text-[11px] text-gray-500\">Sponsored</span>\n      </div>\n      <div className=\"space-y-3\">\n        <Row items={items} duration={42} />\n        <Row items={items.slice().reverse()} reverse duration={48} />\n      </div>\n    </section>\n  );\n}\n\n"],"names":[],"mappings":";;;;;;AAAA;;;AAWA,MAAM,aAAuB;IAC3B;QAAE,IAAI;QAAM,OAAO;QAAiB,MAAM;QAAqC,MAAM;IAA+I;IACpO;QAAE,IAAI;QAAM,OAAO;QAAiB,MAAM;IAAI;IAC9C;QAAE,IAAI;QAAM,OAAO;QAAc,MAAM;IAAI;IAC3C;QAAE,IAAI;QAAM,OAAO;QAAoB,MAAM;IAAI;IACjD;QAAE,IAAI;QAAM,OAAO;QAAgB,MAAM;IAAI;IAC7C;QAAE,IAAI;QAAM,OAAO;QAAa,MAAM;IAAI;IAC1C;QAAE,IAAI;QAAM,OAAO;QAAc,MAAM;IAAI;IAC3C;QAAE,IAAI;QAAM,OAAO;QAAa,MAAM;IAAI;CAC3C;AAED,SAAS,SAAS,KAA0B;QAA1B,EAAE,IAAI,EAAoB,GAA1B;IAChB,MAAM,WAAW,KAAK,KAAK,CAAC,KAAK,GAAG,CAAC,CAAA,IAAK,CAAC,CAAC,EAAE,EAAE,IAAI,CAAC,IAAI,KAAK,CAAC,GAAE,GAAG,WAAW;IAC/E,qBACE,6LAAC;QAAI,WAAU;kBACZ;;;;;;AAGP;KAPS;AAST,SAAS,IAAI,KAAoG;QAApG,EAAE,KAAK,EAAE,UAAU,KAAK,EAAE,WAAW,EAAE,EAA6D,GAApG;IACX,qBACE,6LAAC;QAA8D,OAAO;YAAE,CAAC,aAAoB,EAAE,AAAC,GAAW,OAAT,UAAS;QAAG;kDAA9F,AAAC,WAA2C,OAAjC,UAAU,oBAAoB;;0BACvD,6LAAC;0DAAa;;oBACX,MAAM,GAAG,CAAC,CAAC,mBACV,6LAAC;sEAAyB;sCACxB,cAAA,6LAAC;gCAAE,MAAM,GAAG,IAAI,IAAI;gCAAK,QAAO;gCAAS,KAAI;0EAAuB;;kDAClE,6LAAC;kFAAc;kDACZ,GAAG,IAAI,GACN,qDAAqD;sDACrD,6LAAC;4CAAI,KAAK,GAAG,IAAI;4CAAE,KAAK,GAAG,KAAK;sFAAY;;;;;iEAE5C,6LAAC;4CAAS,MAAM,GAAG,KAAK;;;;;;;;;;;kDAG5B,6LAAC;kFAAc;kDAAS,GAAG,KAAK;;;;;;;;;;;;2BAV3B,GAAG,EAAE;;;;;oBAef,MAAM,GAAG,CAAC,CAAC,mBACV,6LAAC;sEAAmC;sCAClC,cAAA,6LAAC;gCAAE,MAAM,GAAG,IAAI,IAAI;gCAAK,QAAO;gCAAS,KAAI;0EAAuB;;kDAClE,6LAAC;kFAAc;kDACZ,GAAG,IAAI,GACN,qDAAqD;sDACrD,6LAAC;4CAAI,KAAK,GAAG,IAAI;4CAAE,KAAK,GAAG,KAAK;sFAAY;;;;;iEAE5C,6LAAC;4CAAS,MAAM,GAAG,KAAK;;;;;;;;;;;kDAG5B,6LAAC;kFAAc;kDAAS,GAAG,KAAK;;;;;;;;;;;;2BAV3B,AAAC,QAAa,OAAN,GAAG,EAAE;;;;;;;;;;;;;;;;;;;;;AA+BhC;MApDS;AAsDM,SAAS,WAAW,KAA4C;QAA5C,EAAE,QAAQ,UAAU,EAAwB,GAA5C;IACjC,qBACE,6LAAC;QAAQ,WAAU;;0BACjB,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAG,WAAU;wBAAwB,OAAO;4BAAE,OAAO;wBAAU;kCAAG;;;;;;kCACnE,6LAAC;wBAAK,WAAU;kCAA4B;;;;;;;;;;;;0BAE9C,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAI,OAAO;wBAAO,UAAU;;;;;;kCAC7B,6LAAC;wBAAI,OAAO,MAAM,KAAK,GAAG,OAAO;wBAAI,OAAO;wBAAC,UAAU;;;;;;;;;;;;;;;;;;AAI/D;MAbwB","debugId":null}},
    {"offset": {"line": 1532, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/NChinnappan/SourceAI/UI/shell-app/src/components/layout/MainContent.tsx"],"sourcesContent":["'use client';\n\nimport React, { useMemo, useState, useCallback, useRef, useEffect } from 'react';\nimport { useRouter } from 'next/navigation';\nimport catalogData from '@/data/catalog.json';\nimport { recordSearch } from '@/utils/searchHistory';\nimport dynamic from 'next/dynamic';\nconst ForYouSmoove = dynamic(() => import('./ForYouSmoove'), { ssr: false });\nimport {\n  PresentationChartLineIcon,\n  TableCellsIcon,\n  ChatBubbleLeftRightIcon,\n  DocumentTextIcon,\n  ChartBarIcon,\n  CodeBracketIcon,\n  PhotoIcon,\n  VideoCameraIcon,\n  MicrophoneIcon,\n  SparklesIcon,\n  PaperClipIcon,\n  ArrowLeftIcon,\n  ArrowRightIcon,\n  PaperAirplaneIcon,\n  UserIcon,\n  LinkIcon,\n  ClipboardDocumentListIcon,\n  CurrencyDollarIcon,\n  TruckIcon,\n  AcademicCapIcon,\n  PencilSquareIcon,\n  AdjustmentsHorizontalIcon,\n  WrenchScrewdriverIcon\n} from '@heroicons/react/24/outline';\nimport AshleyNews from './AshleyNews';\nimport ServiceNowIncidents from './ServiceNowIncidents';\nimport AdCarousel from './AdCarousel';\n\nimport aiAgentsData from '@/data/ai-agents.json';\n\ntype IconKey =\n  | 'PresentationChartLineIcon'\n  | 'TableCellsIcon'\n  | 'ChatBubbleLeftRightIcon'\n  | 'DocumentTextIcon'\n  | 'ChartBarIcon'\n  | 'CodeBracketIcon'\n  | 'PhotoIcon'\n  | 'VideoCameraIcon'\n  | 'MicrophoneIcon'\n  | 'SparklesIcon';\n\nconst ICONS = {\n  PresentationChartLineIcon,\n  TableCellsIcon,\n  ChatBubbleLeftRightIcon,\n  DocumentTextIcon,\n  ChartBarIcon,\n  CodeBracketIcon,\n  PhotoIcon,\n  VideoCameraIcon,\n  MicrophoneIcon,\n  SparklesIcon,\n};\n\ninterface AIAgent {\n  id: string;\n  name: string;\n  description: string;\n  icon: React.ComponentType<{ className?: string }>;\n  isNew?: boolean;\n  isHot?: boolean;\n}\n\ntype AIAgentJson = {\n  id: string;\n  name: string;\n  description: string;\n  icon: IconKey;\n  isNew?: boolean;\n  isHot?: boolean;\n};\n\nconst aiAgents: AIAgent[] = (aiAgentsData as AIAgentJson[]).map((a) => ({\n  id: a.id,\n  name: a.name,\n  description: a.description,\n  icon: ICONS[a.icon] || SparklesIcon,\n  isNew: a.isNew,\n  isHot: a.isHot,\n}));\n\nconst SHOW_AI_GRID = false; // center grid hidden per request\n\n\nexport function MainContent() {\n  const router = useRouter();\n  type AppEntry = { id: string; title: string };\n  const apps = catalogData as unknown as AppEntry[];\n  const [query, setQuery] = useState('');\n  const [active, setActive] = useState(0);\n  const [listening, setListening] = useState(false);\n  // External routes for specific apps (microfrontends)\n  const externalRoutes: Record<string, string> = {\n    ashleydirect: 'http://localhost:3001/apps/ashleydirect',\n    // Use internal route for Create Order within the shell app\n    createorder: '/apps/createorder',\n    inroute: '/apps/inroute',\n  };\n  const [forYouSpace, setForYouSpace] = useState<{ available: boolean; height: number }>({ available: false, height: 0 });\n\n  type RecentItem = { name: string; type: 'Orders' | 'Finance' | 'Customer' | 'Logistics'; status: string; createdBy: string; modifiedOn: string; href?: string };\n  const recents: RecentItem[] = [\n    {\n      name: 'Created 5 orders last week — not submitted (Click to proceed further)',\n      type: 'Orders',\n      status: 'Action Needed',\n      createdBy: 'System',\n      modifiedOn: new Date().toLocaleDateString(),\n      href: '/apps/orders'\n    },\n    {\n      name: '3 trips in Finance to complete the invoice process (Click to proceed)',\n      type: 'Finance',\n      status: 'Pending',\n      createdBy: 'Finance',\n      modifiedOn: new Date(Date.now() - 86400000 * 2).toLocaleDateString(),\n      href: '/apps/finance'\n    },\n    {\n      name: 'Customer is waiting for that order (Click to proceed)',\n      type: 'Customer',\n      status: 'Urgent',\n      createdBy: 'CSR',\n      modifiedOn: new Date(Date.now() - 86400000 * 3).toLocaleDateString(),\n      href: '/apps/customers'\n    },\n    {\n      name: '2 trucks are in the middle of the way — needs clearance (Click to proceed)',\n      type: 'Logistics',\n      status: 'In Transit',\n      createdBy: 'Logistics',\n      modifiedOn: new Date(Date.now() - 86400000 * 5).toLocaleDateString(),\n      href: '/apps/logistics'\n    },\n  ];\n  const TYPE_ICON: Record<RecentItem['type'], React.ComponentType<{ className?: string }>> = {\n    Orders: ClipboardDocumentListIcon,\n    Finance: CurrencyDollarIcon,\n    Customer: UserIcon,\n    Logistics: TruckIcon,\n  };\n  const STATUS_DOT: Record<string, string> = {\n    'Action Needed': 'bg-amber-500',\n    'Pending': 'bg-blue-500',\n    'Urgent': 'bg-rose-500',\n    'In Transit': 'bg-indigo-500',\n  };\n\n\n  const handleSpaceAvailable = useCallback((available: boolean, height: number) => {\n    setForYouSpace(prev => (prev.available === available && prev.height === height ? prev : { available, height }));\n  }, []);\n\n  const normalize = (s: string) => s.toLowerCase().replace(/[^a-z0-9 ]/g, ' ').replace(/\\s+/g, ' ').trim();\n  const findBestApp = (input: string): AppEntry | undefined => {\n    const q = normalize(input);\n    if (!q) return undefined;\n    let best: { score: number; app: AppEntry } | undefined;\n    for (const a of apps) {\n      const t = normalize(a.title);\n      let score = 0;\n      if (t === q) score = 100;\n      else if (t.startsWith(q) || q.startsWith(t)) score = 80;\n      else if (t.includes(q) || q.includes(t)) score = 60;\n      else {\n        const qt = new Set(q.split(' '));\n        const tt = new Set(t.split(' '));\n        let overlap = 0;\n        qt.forEach(w => { if (tt.has(w)) overlap++; });\n        if (overlap > 0) score = 40 + overlap;\n      }\n      if (!best || score > best.score) best = { score, app: a };\n    }\n    if (best && best.score >= 60) return best.app;\n    return undefined;\n  };\n\n  const filtered = useMemo(() => {\n    const q = query.trim().toLowerCase();\n    if (!q) return [] as AppEntry[];\n    return apps.filter(a => a.title.toLowerCase().includes(q)).slice(0, 7);\n  }, [apps, query]);\n  const go = (id: string) => {\n    const app = apps.find(a => a.id === id);\n    const path = externalRoutes[id] ?? `/apps/${id}`;\n    recordSearch({ id, title: app?.title, query: (query || app?.title || '').trim(), path });\n    if (path.startsWith('http')) {\n      if (typeof window !== 'undefined') window.location.href = path; else router.push(path);\n    } else {\n      router.push(path);\n    }\n  };\n  const onKeyDown: React.KeyboardEventHandler<HTMLTextAreaElement> = (e) => {\n    if (e.key === 'ArrowDown' && filtered.length) { e.preventDefault(); setActive(i => Math.min(i + 1, filtered.length - 1)); return; }\n    if (e.key === 'ArrowUp' && filtered.length) { e.preventDefault(); setActive(i => Math.max(i - 1, 0)); return; }\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      if (filtered.length) go(filtered[Math.max(0, active)].id); else send();\n    }\n  };\n\n  const textRef = useRef<HTMLTextAreaElement | null>(null);\n\n  const autoResize = () => {\n    const el = textRef.current;\n    if (!el) return;\n    el.style.height = 'auto';\n    const max = 220; // slightly taller cap (~6-7 lines)\n    el.style.height = Math.min(el.scrollHeight, max) + 'px';\n  };\n\n  useEffect(() => { autoResize(); }, [query]);\n\n  const onChangeQuery: React.ChangeEventHandler<HTMLTextAreaElement> = (e) => {\n    setQuery(e.target.value);\n    setActive(0);\n    // auto-resize is handled by effect, but do it here too for responsiveness\n    const el = textRef.current; if (el) { el.style.height = 'auto'; el.style.height = Math.min(el.scrollHeight, 220) + 'px'; }\n  };\n\n  type AgentMessage = { role: 'user' | 'assistant'; content: string };\n  const [agentMessages, setAgentMessages] = useState<AgentMessage[]>([]);\n\n  // Conversational agent: Ashley Direct order creation flow\n  type AgentMode = 'none' | 'createOrderAD' | 'inRouteAD';\n  type OrderStep =\n    | 'askCustomer'\n    | 'askItems'\n    | 'askQty'\n    | 'askOrderType'\n    | 'askShipType'\n    | 'askRequestDate'\n    | 'askWarehouse'\n    | 'confirm'\n    | 'done';\n  const [agentMode, setAgentMode] = useState<AgentMode>('none');\n  const [orderStep, setOrderStep] = useState<OrderStep | null>(null);\n  type InRouteStep = 'askCustomer' | 'done';\n  const [inRouteStep, setInRouteStep] = useState<InRouteStep | null>(null);\n  const [orderDraft, setOrderDraft] = useState<{\n    customerNumber: string;\n    shipTo: string;\n    items: string[];\n    quantities: number[];\n    warehouse: string;\n    orderType: 'complete' | 'available';\n    shipMethod: 'delivery' | 'full' | 'express' | 'ltl';\n    requestDate: string; // YYYY-MM-DD\n  }>({\n    customerNumber: '',\n    shipTo: '',\n    items: [],\n    quantities: [],\n    warehouse: '',\n    orderType: 'complete',\n    shipMethod: 'delivery',\n    requestDate: ''\n  });\n\n  // Persistent Create Order draft across navigation\n  const ORDER_DRAFT_KEY = 'oa_draft_create_order';\n  type CreateOrderDraftPersist = {\n    mode: AgentMode;\n    step: OrderStep | null;\n    order: {\n      customerNumber: string;\n      shipTo: string;\n      items: string[];\n      quantities: number[];\n      warehouse: string;\n      orderType: 'complete' | 'available';\n      shipMethod: 'delivery' | 'full' | 'express' | 'ltl';\n      requestDate: string;\n    };\n    messages: AgentMessage[];\n    startedAt: number;\n    updatedAt: number;\n  };\n  const saveDraft = () => {\n    if (typeof window === 'undefined') return;\n    try {\n      const prev = (() => { try { return JSON.parse(localStorage.getItem(ORDER_DRAFT_KEY) || 'null'); } catch { return null; } })();\n      const payload: CreateOrderDraftPersist = {\n        mode: agentMode,\n        step: orderStep,\n        order: orderDraft,\n        messages: agentMessages,\n        startedAt: prev?.startedAt ?? Date.now(),\n        updatedAt: Date.now(),\n      };\n      localStorage.setItem(ORDER_DRAFT_KEY, JSON.stringify(payload));\n      window.dispatchEvent(new Event('order-draft-updated'));\n    } catch {}\n  };\n  const loadDraft = (): CreateOrderDraftPersist | null => {\n    if (typeof window === 'undefined') return null;\n    try { return JSON.parse(localStorage.getItem(ORDER_DRAFT_KEY) || 'null'); } catch { return null; }\n  };\n  const clearDraft = () => {\n    if (typeof window === 'undefined') return;\n    try { localStorage.removeItem(ORDER_DRAFT_KEY); window.dispatchEvent(new Event('order-draft-updated')); } catch {}\n  };\n  const [resumeDraft, setResumeDraft] = useState<CreateOrderDraftPersist | null>(null);\n  useEffect(() => {\n    if (typeof window === 'undefined') return;\n    const read = () => {\n      try {\n        const raw = localStorage.getItem(ORDER_DRAFT_KEY);\n        const d: CreateOrderDraftPersist | null = raw ? JSON.parse(raw) : null;\n        if (d && d.mode === 'createOrderAD' && d.step && d.step !== 'done') setResumeDraft(d);\n        else setResumeDraft(null);\n      } catch {\n        setResumeDraft(null);\n      }\n    };\n    read();\n    window.addEventListener('order-draft-updated', read as unknown as EventListener);\n    return () => window.removeEventListener('order-draft-updated', read as unknown as EventListener);\n  }, []);\n  useEffect(() => {\n    if (agentMode !== 'createOrderAD') return;\n    if (typeof window === 'undefined') return;\n    try {\n      const prev = (() => { try { return JSON.parse(localStorage.getItem(ORDER_DRAFT_KEY) || 'null'); } catch { return null; } })();\n      const payload: CreateOrderDraftPersist = {\n        mode: agentMode,\n        step: orderStep,\n        order: orderDraft,\n        messages: agentMessages,\n        startedAt: prev?.startedAt ?? Date.now(),\n        updatedAt: Date.now(),\n      };\n      localStorage.setItem(ORDER_DRAFT_KEY, JSON.stringify(payload));\n      window.dispatchEvent(new Event('order-draft-updated'));\n    } catch {}\n  }, [agentMode, orderStep, orderDraft, agentMessages]);\n  const resumeFromDraft = () => {\n    const d = loadDraft();\n    if (!d) return;\n    setAgentMode('createOrderAD');\n    setOrderStep(d.step);\n    setOrderDraft(d.order);\n    setAgentMessages(d.messages || []);\n    pushAssistant('Resumed your Create Order draft. You can continue where you left off.');\n    setResumeDraft(null);\n  };\n  const discardDraft = () => { clearDraft(); setResumeDraft(null); };\n\n\n  const pushAssistant = (text: string) => setAgentMessages((m) => [...m, { role: 'assistant', content: text }]);\n  const pushUser = (text: string) => setAgentMessages((m) => [...m, { role: 'user', content: text }]);\n\n  // Recent Activity: store hero-search submissions (not menu search)\n  const RECENT_KEY = 'oa_recent_acts';\n  type RecentAct = { id: string; text: string; ts: number; href?: string };\n  const addRecent = (entry: Omit<RecentAct, 'id' | 'ts'> & { ts?: number }) => {\n    try {\n      const raw = localStorage.getItem(RECENT_KEY);\n      const list: RecentAct[] = raw ? JSON.parse(raw) : [];\n      const item: RecentAct = { id: String(Date.now()) + Math.random().toString(36).slice(2), text: entry.text, href: entry.href, ts: entry.ts ?? Date.now() };\n      const next = [item, ...list].slice(0, 30);\n      localStorage.setItem(RECENT_KEY, JSON.stringify(next));\n      window.dispatchEvent(new CustomEvent('recent-activity', { detail: item }));\n    } catch {}\n  };\n  // Recent Activity (hero-search) — read list for on-page widget\n  const [heroRecents, setHeroRecents] = useState<RecentAct[]>([]);\n  useEffect(() => {\n    if (typeof window === 'undefined') return;\n    const load = () => {\n      try { setHeroRecents(JSON.parse(localStorage.getItem(RECENT_KEY) || '[]')); }\n      catch { setHeroRecents([]); }\n    };\n    load();\n    const onRecent = () => load();\n    const onStorage = (e: StorageEvent) => { if (e.key === RECENT_KEY) load(); };\n    window.addEventListener('recent-activity', onRecent as EventListener);\n    window.addEventListener('storage', onStorage);\n    return () => {\n      window.removeEventListener('recent-activity', onRecent as EventListener);\n      window.removeEventListener('storage', onStorage);\n    };\n  }, []);\n\n\n  const beginCreateOrderFlow = () => {\n    setAgentMode('createOrderAD');\n    setOrderStep('askCustomer');\n    pushAssistant(\"Great — let's create an order in Ashley Direct. What is the customer number and ship-to? For example: 123456, 789012\");\n    // Record a single draft activity and persist immediately\n    addRecent({ text: 'Create Order: started (draft)' });\n    saveDraft();\n  };\n\n  const beginInRouteFlow = () => {\n    setAgentMode('inRouteAD');\n    setInRouteStep('askCustomer');\n    pushAssistant('Okay — for In Route Orders, provide a customer number, optionally followed by a ship-to. Example: 8888300 or 8888300, 480');\n  };\n\n  const navToInRouteWithPreset = (params: URLSearchParams) => {\n    const base = externalRoutes['inroute'] ?? '/apps/inroute';\n    const url = `${base}?${params.toString()}`;\n    if (typeof window !== 'undefined') window.location.href = url; else router.push(url);\n  };\n\n  const handleInRouteInput = (input: string) => {\n    const q = input.trim();\n    const nums = q.match(/\\d+/g) || [];\n    if (nums.length >= 2) {\n      const customer = String(nums[0]);\n      const shipTo = String(nums[1]);\n      const p = new URLSearchParams({ customer, shipTo });\n      addRecent({ text: `In Route Orders: customer ${customer}, ship-to ${shipTo}`, href: `/apps/inroute?customer=${customer}&shipTo=${shipTo}` });\n      pushAssistant('Showing trips in route for the provided ship-to. Redirecting...');\n      navToInRouteWithPreset(p);\n      setInRouteStep('done');\n      return;\n    }\n    if (nums.length >= 1) {\n      const customer = String(nums[0]);\n      const p = new URLSearchParams({ customer });\n      addRecent({ text: `In Route Orders: customer ${customer}`, href: `/apps/inroute?customer=${customer}` });\n      pushAssistant('Showing trips in route for the customer. Redirecting...');\n      navToInRouteWithPreset(p);\n      setInRouteStep('done');\n      return;\n    }\n    pushAssistant('Please provide a customer number, optionally followed by a ship-to. Example: 8888300 or 8888300, 480');\n  };\n\n  const navToAshleyDirectWithPreset = (params: URLSearchParams) => {\n    const base = externalRoutes['createorder'] ?? '/apps/createorder';\n    const url = `${base}?${params.toString()}`;\n    if (typeof window !== 'undefined') window.location.href = url; else router.push(url);\n  };\n\n  const handleOrderInput = (input: string) => {\n    const q = input.trim();\n    if (orderStep === 'askCustomer') {\n      const nums = q.match(/\\d+/g) || [];\n      if (nums.length >= 2) {\n        setOrderDraft((d) => ({ ...d, customerNumber: String(nums[0]), shipTo: String(nums[1]) }));\n        setOrderStep('askItems');\n        pushAssistant('Got it. Please enter the item numbers (comma or space separated).');\n      } else {\n        pushAssistant('Please provide both customer number and ship-to. Example: 123456, 789012');\n      }\n      return;\n    }\n    if (orderStep === 'askItems') {\n      const items = q.split(/[\\s,]+/).map(s => s.trim()).filter(Boolean);\n      if (items.length > 0) {\n        setOrderDraft((d) => ({ ...d, items }));\n        setOrderStep('askQty');\n        pushAssistant(`Enter quantity for each item (${items.join(', ')}). Example: ${items.map(()=>1).join(', ')}`);\n      } else {\n        pushAssistant('Please enter at least one item number, separated by commas or spaces.');\n      }\n      return;\n    }\n    if (orderStep === 'askQty') {\n      const qty = (q.match(/\\d+/g) || []).map(n => parseInt(n, 10)).filter(n => Number.isFinite(n));\n      const count = orderDraft.items.length;\n      if (qty.length === count && qty.every(n => n > 0)) {\n        setOrderDraft((d) => ({ ...d, quantities: qty }));\n        setOrderStep('askOrderType');\n        pushAssistant('Order type? Say \"Ship Complete Series Groups\" or \"Ship Items As Available\".');\n      } else {\n        pushAssistant(`Please provide ${count} positive quantities, one per item, in the same order. Example: ${orderDraft.items.map(()=>1).join(', ')}`);\n      }\n      return;\n    }\n    if (orderStep === 'askOrderType') {\n      const lc = q.toLowerCase();\n      const ot = lc.includes('complete') ? 'complete' : (lc.includes('available') ? 'available' : null);\n      if (ot) {\n        setOrderDraft((d) => ({ ...d, orderType: ot }));\n        setOrderStep('askShipType');\n        pushAssistant('Shipping type? Delivery, Full Truckload Pickup, Ashley Express, or Less Than Full Truckload/Carrier (LTL)?');\n      } else {\n        pushAssistant('Please choose order type: \"Ship Complete Series Groups\" or \"Ship Items As Available\".');\n      }\n      return;\n    }\n    if (orderStep === 'askShipType') {\n      const lc = q.toLowerCase();\n      let sm: 'delivery' | 'full' | 'express' | 'ltl' | null = null;\n      if (lc.includes('delivery')) sm = 'delivery';\n      else if (lc.includes('full')) sm = 'full';\n      else if (lc.includes('express')) sm = 'express';\n      else if (lc.includes('ltl') || lc.includes('less')) sm = 'ltl';\n      if (sm) {\n        setOrderDraft((d) => ({ ...d, shipMethod: sm }));\n        setOrderStep('askRequestDate');\n        pushAssistant('What is the request date? You can say \"today\" or provide YYYY-MM-DD.');\n      } else {\n        pushAssistant('Please select a shipping type: Delivery, Full Truckload Pickup, Ashley Express, or Less Than Full Truckload/Carrier.');\n      }\n      return;\n    }\n    if (orderStep === 'askRequestDate') {\n      const lc = q.toLowerCase();\n      let dateStr = '';\n      if (lc === 'today' || lc === 'now') {\n        dateStr = new Date().toISOString().slice(0, 10);\n      } else {\n        const m = q.match(/(\\d{4})[-\\\\/](\\d{1,2})[-\\\\/](\\d{1,2})/);\n        if (m) {\n          const yyyy = m[1].padStart(4, '0');\n          const mm = m[2].padStart(2, '0');\n          const dd = m[3].padStart(2, '0');\n          dateStr = `${yyyy}-${mm}-${dd}`;\n        }\n      }\n      if (dateStr) {\n        setOrderDraft((d) => ({ ...d, requestDate: dateStr }));\n        setOrderStep('askWarehouse');\n        pushAssistant('Which warehouse would you like to use? For example: ADVANCE NC');\n      } else {\n        pushAssistant('Please enter a valid date like 2025-09-18 or say \"today\".');\n      }\n      return;\n    }\n    if (orderStep === 'askWarehouse') {\n      const warehouse = q;\n      if (warehouse) {\n        setOrderDraft((d) => ({ ...d, warehouse }));\n        setOrderStep('confirm');\n        const p = new URLSearchParams({\n          customer: orderDraft.customerNumber,\n          shipTo: orderDraft.shipTo,\n          items: orderDraft.items.join(','),\n          qty: orderDraft.quantities.join(','),\n          warehouse,\n          orderType: orderDraft.orderType,\n          shipMethod: orderDraft.shipMethod,\n          requestDate: orderDraft.requestDate,\n        });\n        pushAssistant('Perfect. Redirecting to the Order Entry page with your order prefilled...');\n        navToAshleyDirectWithPreset(p);\n        setOrderStep('done');\n      } else {\n        pushAssistant('Please provide a warehouse name.');\n      }\n      return;\n    }\n  };\n\n  const looksLikeQuestion = (q: string) => /how|what|when|who|why|which|where|count|number|total|show|list/i.test(q);\n  const generateFollowUp = (q: string): string => {\n    const hasOrders = /order/i.test(q);\n    const hasAD = /ashley\\s*direct|ashleydirect/i.test(q);\n    const hasTime = /(today|yesterday|week|month|year|last|past|between|\\d{4})/i.test(q);\n    if (hasOrders && hasAD && !hasTime) {\n      return 'Over what timeframe should I check orders created through Ashley Direct? For example: today, last 7 days, or last month.';\n    }\n    if (!hasTime && looksLikeQuestion(q)) {\n      return 'Got it. What timeframe should I use? (e.g., today, last 30 days) You can also add filters like department or user.';\n    }\n    return 'Could you clarify the timeframe or any filters I should use?';\n  };\n\n  const send = () => {\n    const q = query.trim();\n    if (!q) return;\n    // Show user message immediately\n    pushUser(q);\n    // Record in recent activity for home sidebar\n    addRecent({ text: q });\n\n    // If we're already in a flow, handle this step\n    if (agentMode === 'createOrderAD' && orderStep) {\n      handleOrderInput(q);\n      setQuery('');\n      return;\n    }\n    if (agentMode === 'inRouteAD' && inRouteStep) {\n      handleInRouteInput(q);\n      setQuery('');\n      return;\n    }\n\n    // Intent: start conversational flows\n    const isCreateOrderFlow = /(order entry|create my order|create\\s+order|new\\s+order)/i.test(q);\n    if (isCreateOrderFlow) {\n      beginCreateOrderFlow();\n      setQuery('');\n      return;\n    }\n    const isInRouteFlow = /(in\\s*route\\s*orders?|inroute\\s*orders?|in\\s*route\\s*order|trips?\\s*in\\s*route)/i.test(q);\n    if (isInRouteFlow) {\n      beginInRouteFlow();\n      setQuery('');\n      return;\n    }\n\n    // Otherwise, try app navigation shortcut\n    const match = findBestApp(q);\n    if (match) { setQuery(''); go(match.id); return; }\n\n    // Generic follow-up for analytics-style queries\n    const follow = generateFollowUp(q);\n    pushAssistant(follow);\n    setQuery('');\n  };\n\n  const handleQuickReply = (t: string) => {\n    // Treat quick replies as immediate user answers\n    pushUser(t);\n    if (agentMode === 'createOrderAD' && orderStep) {\n      handleOrderInput(String(t));\n    } else {\n      setQuery(String(t));\n    }\n    setTimeout(() => textRef.current?.focus(), 0);\n  };\n\n  const startVoice = () => {\n    if (typeof window === 'undefined') return;\n    const SR: any = (window as any).SpeechRecognition || (window as any).webkitSpeechRecognition;\n    if (!SR) { alert('Voice recognition is not supported in this browser.'); return; }\n    const rec = new SR();\n    rec.lang = 'en-US';\n    rec.interimResults = false;\n    rec.maxAlternatives = 1;\n    setListening(true);\n    rec.onresult = (ev: any) => {\n      const t = ev?.results?.[0]?.[0]?.transcript || '';\n      const q = String(t).trim();\n      setQuery(q);\n      const match = findBestApp(q);\n\n      if (match) go(match.id);\n    };\n    rec.onerror = () => setListening(false);\n    rec.onend = () => setListening(false);\n    rec.start();\n  };\n\n  return (\n    <div className=\"flex-1 p-8\">\n      {/* Hero Section */}\n      <div className=\"text-center mb-12\">\n        <h1 className=\"text-4xl font-bold text-gray-900 mb-4\">\n          Welcome to One Ashley Super Agent\n        </h1>\n\n        <p className=\"text-lg text-gray-700 mb-8\">\n          Ask anything, create anything\n        </p>\n\n        {/* Main Search Card (new design) */}\n        <div className=\"mb-8 flex justify-center gap-6\">\n          <div className=\"w-full max-w-3xl\">\n            <div className=\"bg-white rounded-2xl border border-gray-200 shadow-lg p-4\">\n            {/* Top toolbar with arrows and metrics */}\n            <div className=\"flex items-center justify-between gap-3 px-1\">\n              <button type=\"button\" className=\"w-9 h-9 rounded-full bg-indigo-50 text-indigo-600 flex items-center justify-center\">\n                <ArrowLeftIcon className=\"w-5 h-5\" />\n              </button>\n              <div className=\"flex-1 grid grid-cols-1 sm:grid-cols-3 gap-3\">\n                <div className=\"rounded-lg border border-gray-200 bg-gray-50 px-3 py-2 text-center\">\n                  <div className=\"text-[12px] font-semibold text-gray-700\">Awaiting Actions</div>\n                  <div className=\"text-emerald-600 font-bold\">35</div>\n                </div>\n                <div className=\"rounded-lg border border-gray-200 bg-gray-50 px-3 py-2 text-center\">\n                  <div className=\"text-[12px] font-semibold text-gray-700\">Focus Items</div>\n                  <div className=\"text-amber-600 font-bold\">48</div>\n                </div>\n                <div className=\"rounded-lg border border-gray-200 bg-gray-50 px-3 py-2 text-center\">\n                  <div className=\"text-[12px] font-semibold text-gray-700\">Opportunities</div>\n                  <div className=\"text-orange-600 font-bold\">12</div>\n                </div>\n              </div>\n              <button type=\"button\" className=\"w-9 h-9 rounded-full bg-indigo-50 text-indigo-600 flex items-center justify-center\">\n                <ArrowRightIcon className=\"w-5 h-5\" />\n              </button>\n\n            </div>\n\n            {/* Input row */}\n            <div className=\"mt-4\">\n              <div className=\"relative\">\n                <textarea\n                  ref={textRef}\n                  rows={3}\n                  data-testid=\"hero-search\"\n                  placeholder=\"Hey Wanek, Cameron how can I help you\"\n                  value={query}\n\n                  onChange={onChangeQuery}\n                  onKeyDown={onKeyDown}\n                  className=\"block w-full min-h-20 px-5 pr-28 py-3 text-[15px] leading-6 text-gray-900 placeholder-gray-400 bg-transparent border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--ring)] resize-none overflow-hidden\"\n                />\n                {/* Right action icons */}\n                <div className=\"absolute right-3 top-1/2 -translate-y-1/2 flex items-center gap-2\">\n                  <button type=\"button\" className=\"p-1.5 rounded-md text-gray-400 hover:text-gray-600 hover:bg-gray-100\">\n                    <PaperClipIcon className=\"w-5 h-5\" />\n                  </button>\n                  <button type=\"button\" onClick={startVoice} aria-pressed={listening} className=\"p-1.5 rounded-md text-gray-400 hover:text-gray-600 hover:bg-gray-100\">\n                    <MicrophoneIcon className=\"w-5 h-5\" />\n                  </button>\n                  <button type=\"button\" onClick={send} className=\"p-1.5 rounded-md text-gray-400 hover:text-gray-600 hover:bg-gray-100\">\n                    <PaperAirplaneIcon className=\"w-5 h-5\" />\n                  </button>\n                </div>\n              </div>\n\n                {/* Resume Create Order draft banner */}\n                {resumeDraft && agentMode === 'none' && (\n                  <div className=\"mt-3 flex items-center justify-between rounded-lg border border-amber-300 bg-amber-50 px-3 py-2 text-amber-900\">\n                    <div className=\"text-sm\">\n                      Create Order draft in progress \u0014 last updated {new Date(resumeDraft.updatedAt).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}\n                    </div>\n                    <div className=\"flex gap-2\">\n                      <button type=\"button\" onClick={resumeFromDraft} className=\"px-3 py-1 rounded-md bg-amber-600 text-white text-xs hover:bg-amber-700\">Resume</button>\n                      <button type=\"button\" onClick={discardDraft} className=\"px-3 py-1 rounded-md border border-amber-300 bg-white text-amber-800 text-xs hover:bg-amber-100\">Discard</button>\n                    </div>\n                  </div>\n                )}\n\n\n              {/* Suggestions dropdown */}\n              {filtered.length > 0 && (\n                <ul className=\"mt-2 z-20 bg-white rounded-xl shadow-lg ring-1 ring-gray-200 overflow-hidden\">\n                  {filtered.map((a, i) => (\n                    <li key={a.id}>\n                      <button\n                        type=\"button\"\n                        className={`w-full text-left px-4 py-3 flex items-center gap-3 hover:bg-gray-50 ${i === active ? 'bg-gray-50' : ''}`}\n                        onMouseDown={(e) => { e.preventDefault(); go(a.id); }}\n                      >\n                        <div className=\"w-7 h-7 rounded-md brand-soft brand-text flex items-center justify-center text-xs font-semibold\">\n                          {a.title.split(' ').map(w => w[0]).join('').slice(0,3).toUpperCase()}\n\n                        </div>\n                        <span className=\"text-sm text-gray-900\">{a.title}</span>\n                      </button>\n                    </li>\n                  ))}\n                </ul>\n              )}\n\n              {/* Agent follow-up panel */}\n              {agentMessages.length > 0 && (\n                <div className=\"mt-3 rounded-xl border border-gray-200 bg-white\">\n                  <div className=\"p-4 space-y-2\">\n                    {agentMessages.map((m, i) => (\n                      <div key={i} className={`text-sm ${m.role === 'assistant' ? 'text-gray-900' : 'text-gray-700'}`}>{m.content}</div>\n                    ))}\n                    {/* Quick replies */}\n                    {agentMessages[agentMessages.length - 1]?.role === 'assistant' && (\n                      <div className=\"pt-1 flex flex-wrap gap-2\">\n                        {['Today', 'Last 7 days', 'Last 30 days'].map((q) => (\n                          <button\n                            key={q}\n                            type=\"button\"\n                            onClick={() => handleQuickReply(q)}\n                            className=\"px-2.5 py-1.5 text-xs rounded-full border border-gray-200 text-gray-700 hover:bg-gray-50\"\n                          >\n                            {q}\n                          </button>\n                        ))}\n                      </div>\n                    )}\n                  </div>\n                </div>\n              )}\n\n\n\n              {/* Bottom row */}\n              <div className=\"mt-3 flex items-center justify-between\">\n                <button type=\"button\" className=\"inline-flex items-center gap-2 px-3 py-1.5 rounded-full bg-gray-100 text-gray-700 text-sm\">\n                  <UserIcon className=\"w-4 h-4\" />\n                  Personalize\n                  <LinkIcon className=\"w-4 h-4 text-gray-400\" />\n                </button>\n                <div />\n              </div>\n            </div>\n          </div>\n          </div>\n\n        {/* Right of hero-search: Recent Activity */}\n        <aside className=\"hidden xl:block w-80 shrink-0\">\n          <section className=\"bg-white rounded-xl border border-gray-200 shadow-sm p-4\">\n            <div className=\"flex items-center justify-between\">\n              <h3 className=\"text-base font-semibold text-gray-900\">Recent Activity</h3>\n              {heroRecents.length > 0 && (\n                <button type=\"button\" className=\"text-[11px] text-indigo-600 hover:underline\"\n                  onClick={() => { localStorage.removeItem(RECENT_KEY); setHeroRecents([]); }}>Clear</button>\n              )}\n            </div>\n            {heroRecents.length === 0 ? (\n              <div className=\"text-xs text-gray-500 mt-2\">No recent items yet. Try the big search box to get started.</div>\n            ) : (\n              <ul className=\"mt-2 divide-y divide-gray-100\">\n                {heroRecents.slice(0, 6).map(r => (\n                  <li key={r.id} className=\"py-2 text-[13px] flex items-start gap-2\">\n                    <span className=\"mt-1 inline-block w-1.5 h-1.5 rounded-full bg-indigo-500\" />\n                    {r.href ? (\n                      <a href={r.href} className=\"flex-1 text-indigo-600 hover:underline break-words\">{r.text}</a>\n                    ) : (\n                      <span className=\"flex-1 text-gray-800 break-words\">{r.text}</span>\n                    )}\n                    <span className=\"ml-2 shrink-0 text-[10px] text-gray-500\">{new Date(r.ts).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}</span>\n                  </li>\n                ))}\n              </ul>\n            )}\n          </section>\n        </aside>\n\n        </div>\n\n\n      </div>\n\n      {/* AI Agents Grid (hidden) */}\n      <div className=\"max-w-6xl mx-auto\">\n        {SHOW_AI_GRID && (\n          <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4 mb-8\">\n            {aiAgents.map((agent) => {\n              const IconComponent = agent.icon;\n              return (\n                <div key={agent.id} className=\"relative bg-white rounded-xl p-4 border border-gray-200 hover:border-gray-300 hover:shadow-md transition-all cursor-pointer group\">\n                  {agent.isNew && (\n                    <span className=\"absolute -top-2 -right-2 bg-green-500 text-white text-xs px-2 py-1 rounded-full\">\n                      NEW\n                    </span>\n                  )}\n                  {agent.isHot && (\n                    <span className=\"absolute -top-2 -right-2 bg-red-500 text-white text-xs px-2 py-1 rounded-full\">\n                      HOT\n                    </span>\n                  )}\n                  <div className=\"w-12 h-12 rounded-lg brand-soft brand-text flex items-center justify-center mb-3\">\n                    <IconComponent className=\"w-6 h-6\" />\n\n                  </div>\n                  <h3 className=\"font-medium text-gray-900 mb-1\">{agent.name}</h3>\n                  <p className=\"text-sm text-gray-500\">{agent.description}</p>\n                </div>\n              );\n            })}\n          </div>\n        )}\n\n        {/* Quick actions */}\n        <div className=\"mt-4 flex flex-wrap items-center justify-center gap-3\">\n          <button type=\"button\" className=\"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-white border border-gray-200 shadow-sm text-gray-700 hover:bg-gray-50\">\n            <AcademicCapIcon className=\"w-5 h-5 text-gray-500\" />\n            Learn\n          </button>\n          <button type=\"button\" className=\"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-white border border-gray-200 shadow-sm text-gray-700 hover:bg-gray-50\">\n            <PencilSquareIcon className=\"w-5 h-5 text-gray-500\" />\n            Create\n          </button>\n          <button type=\"button\" className=\"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-white border border-gray-200 shadow-sm text-gray-700 hover:bg-gray-50\">\n            <ChartBarIcon className=\"w-5 h-5 text-gray-500\" />\n            Analyze\n          </button>\n          <button type=\"button\" className=\"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-white border border-gray-200 shadow-sm text-gray-700 hover:bg-gray-50\">\n            <AdjustmentsHorizontalIcon className=\"w-5 h-5 text-gray-500\" />\n            Optimize\n          </button>\n          <button type=\"button\" className=\"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-white border border-gray-200 shadow-sm text-gray-700 hover:bg-gray-50\">\n            <WrenchScrewdriverIcon className=\"w-5 h-5 text-gray-500\" />\n            Troubleshoot\n          </button>\n        </div>\n\n\n\n        {/* For You Section - Feather fan on scroll */}\n        <div className=\"mt-2\">\n          <ForYouSmoove onSpaceAvailable={handleSpaceAvailable} />\n        </div>\n\n        {/* Ashley News (horizontal, animated) */}\n        <div style={{ marginTop: forYouSpace.available ? -forYouSpace.height : 0, transition: 'margin-top 400ms ease' }}>\n          <AshleyNews />\n        </div>\n\n        {/* ServiceNow Incidents */}\n        <ServiceNowIncidents />\n\n        {/* External Ads (logo carousel) */}\n        <AdCarousel />\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 3065, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/NChinnappan/SourceAI/UI/shell-app/src/components/layout/SearchHistoryDrawer.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useEffect, useState } from \"react\";\nimport Link from \"next/link\";\nimport { useRouter } from \"next/navigation\";\nimport { readHistory, SearchHistoryItem, clearHistory } from \"@/utils/searchHistory\";\nimport { XMarkIcon, MagnifyingGlassIcon, ClockIcon } from \"@heroicons/react/24/outline\";\nimport catalogData from \"@/data/catalog.json\";\nimport { BuildingOfficeIcon, TruckIcon, CurrencyDollarIcon, UserGroupIcon, DocumentTextIcon, CubeIcon, ServerIcon, ChartBarIcon, Squares2X2Icon, SquaresPlusIcon } from \"@heroicons/react/24/outline\";\n\nconst ICONS: Record<string, React.ComponentType<{ className?: string }>> = {\n  BuildingOfficeIcon,\n  TruckIcon,\n  CurrencyDollarIcon,\n  UserGroupIcon,\n  DocumentTextIcon,\n  CubeIcon,\n  ServerIcon,\n  ChartBarIcon,\n  Squares2X2Icon,\n  SquaresPlusIcon,\n};\n\n// quick map of app id -> icon string\nconst CATALOG_ICON_BY_ID: Record<string, string | undefined> = Object.fromEntries(\n  (catalogData as any[]).map((c) => [c.id, c.icon])\n);\n\nexport default function SearchHistoryDrawer({ open, onClose }: { open: boolean; onClose: () => void }) {\n  const [items, setItems] = useState<SearchHistoryItem[]>([]);\n  const [filterQ, setFilterQ] = useState('');\n  const router = useRouter();\n\n  useEffect(() => {\n    if (!open) return;\n    setItems(readHistory());\n  }, [open]);\n\n  const go = (it: SearchHistoryItem) => {\n    const path = it.path || (it.id ? `/apps/${it.id}` : undefined);\n    if (path) router.push(path);\n    onClose();\n  };\n\n  const timeAgo = (ts: number) => {\n    const d = Date.now() - ts;\n    const m = Math.floor(d / 60000);\n    if (m < 1) return 'just now';\n    if (m < 60) return m + 'm';\n    const h = Math.floor(m / 60);\n    if (h < 24) return h + 'h';\n    const days = Math.floor(h / 24);\n    return days + 'd';\n  };\n\n  const display = (filterQ\n    ? items.filter(it => (it.title || '').toLowerCase().includes(filterQ.toLowerCase()) || it.query.toLowerCase().includes(filterQ.toLowerCase()))\n    : items\n  ).slice(0, 10);\n\n  if (!open) return null;\n\n\n  return (\n    <div className=\"fixed inset-0 z-50\">\n      {/* Backdrop */}\n      <button aria-label=\"Close\" onClick={onClose} className=\"absolute inset-0 bg-black/30\" />\n\n      {/* Drawer */}\n      <aside className=\"absolute left-0 top-0 h-full w-[320px] bg-white shadow-xl ring-1 ring-black/5 flex flex-col\">\n        <div className=\"flex items-center justify-between px-4 py-3 border-b border-gray-200\">\n          <div className=\"text-sm font-semibold text-gray-800\">Task List</div>\n          <div className=\"flex items-center gap-2\">\n            <button onClick={() => { clearHistory(); setItems([]); }} className=\"text-xs text-gray-500 hover:text-gray-700\">Clear</button>\n            <button onClick={onClose} className=\"p-1 rounded hover:bg-gray-100\">\n              <XMarkIcon className=\"w-5 h-5 text-gray-500\" />\n            </button>\n          </div>\n        </div>\n        {/* Search inside drawer */}\n        <div className=\"px-4 py-2 border-b border-gray-200\">\n          <div className=\"relative\">\n            <input\n              value={filterQ}\n              onChange={(e) => setFilterQ(e.target.value)}\n              placeholder=\"Search tasks\"\n              className=\"w-full pl-8 pr-3 py-2 text-sm bg-white/80 backdrop-blur border border-gray-200 rounded-2xl focus:outline-none focus:ring-2 focus:ring-[var(--ring)] shadow-sm hover:shadow-md focus:shadow-lg transition-all duration-300 placeholder:transition-opacity focus:placeholder-opacity-80\"\n            />\n            <MagnifyingGlassIcon className=\"w-4 h-4 text-gray-400 absolute left-2.5 top-1/2 -translate-y-1/2\" />\n          </div>\n        </div>\n\n\n        <div className=\"flex-1 overflow-auto py-2\">\n          {items.length === 0 ? (\n            <div className=\"px-4 py-6 text-sm text-gray-500\">No recent searches yet.</div>\n          ) : (\n            <>\n              <div className=\"px-4 text-[11px] uppercase tracking-wide text-gray-400 mb-2\">Today</div>\n              <ul className=\"px-2 space-y-1\">\n                {display.map((it, idx) => {\n                  const iconName = (it.id && CATALOG_ICON_BY_ID[it.id]) || undefined;\n                  const Icon = (iconName && ICONS[iconName]) || ClockIcon;\n                  return (\n                    <li key={idx}>\n\n                      <button onClick={() => go(it)} className=\"w-full flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-gray-100 text-left\">\n                        <span className=\"inline-flex items-center justify-center w-7 h-7 rounded-md bg-gray-100 text-gray-600\">\n                          <Icon className=\"w-4 h-4\" />\n                        </span>\n                        <span className=\"flex-1\">\n                          <div className=\"text-sm text-gray-900 line-clamp-1\">{it.title || it.query}</div>\n                          {it.title && (\n                            <div className=\"text-xs text-gray-500 line-clamp-1\">{it.query}</div>\n                          )}\n                        </span>\n                        <span className=\"text-[10px] text-gray-400\">×{it.count || 1} · {timeAgo(it.ts)}</span>\n                      </button>\n                    </li>\n                  );\n                })}\n              </ul>\n            </>\n          )}\n        </div>\n\n        <div className=\"px-4 py-3 border-t border-gray-200 text-xs text-gray-500\">\n          Tip: Click an item to repeat the same action.\n        </div>\n      </aside>\n    </div>\n  );\n}\n\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 3390, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/NChinnappan/SourceAI/UI/shell-app/src/data/knowledge.ts"],"sourcesContent":["export type KnowledgeDoc = { id: string; title: string; text: string };\n\nexport const knowledgeDocs: KnowledgeDoc[] = [\n  {\n    id: 'catalog-overview',\n    title: 'Application Catalog Overview',\n    text:\n      'The shell provides access to core applications used at Ashley. Applications currently exposed in the catalog include Ashley Direct, Ashley Net, Supplier, HR, Payroll, Finance, Transportation, AS400, High Jump, and More Apps. You can ask the chatbot to list all apps or search by capability to quickly navigate.'\n  },\n  {\n    id: 'chatbot-commands',\n    title: 'Chatbot Commands and Capabilities',\n    text:\n      'The chatbot supports: listing all applications (e.g., \"list all apps\"), catalog search (e.g., \"search sales app\"), order status lookup (e.g., \"track order SO12345\"), and sample report generation (e.g., \"generate sales report csv 20 rows\"). It will ask follow-up questions to gather missing details (slot-filling).'\n  },\n  {\n    id: 'report-generation',\n    title: 'Report Generation (Sample Data)',\n    text:\n      'You can generate sample data reports for quick testing and demonstration. Supported report types include sales and inventory, with CSV or JSON outputs. The chatbot can also provide download options for CSV, JSON, Excel, Word, and PDF when enabled. Example: \"generate sales report json 15 rows\".'\n  },\n  {\n    id: 'search-history',\n    title: 'Search History and For You',\n    text:\n      'The shell UI includes a persisted search history with a left drawer interface. Recent searches are recorded locally and can be reviewed or filtered. The For You section highlights frequently used applications with vibrant icons and gradient cards.'\n  }\n];\n\n"],"names":[],"mappings":";;;;AAEO,MAAM,gBAAgC;IAC3C;QACE,IAAI;QACJ,OAAO;QACP,MACE;IACJ;IACA;QACE,IAAI;QACJ,OAAO;QACP,MACE;IACJ;IACA;QACE,IAAI;QACJ,OAAO;QACP,MACE;IACJ;IACA;QACE,IAAI;QACJ,OAAO;QACP,MACE;IACJ;CACD","debugId":null}},
    {"offset": {"line": 3423, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/NChinnappan/SourceAI/UI/shell-app/src/agents/orchestrator.ts"],"sourcesContent":["// Simple client-side orchestrator with pluggable agents and slot-filling\n\nimport catalogData from '@/data/catalog.json';\nimport { knowledgeDocs } from '@/data/knowledge';\n\nexport type AgentSession = {\n  agentId: string;\n  slotIndex: number;\n  slots: Record<string, string>;\n};\n\nexport type ReportAttachment = {\n  type: 'report';\n  name: string;\n  headers: string[];\n  rows: (string | number)[][];\n  format?: 'csv' | 'json';\n};\n\nexport type ProcessResult = {\n  replies: string[];\n  session: AgentSession | null;\n  attachment?: ReportAttachment;\n};\n\ntype ExecuteOutput = string | { message: string; attachment?: ReportAttachment };\n\ntype Agent = {\n  id: string;\n  name: string;\n  // Return a score 0..1 indicating how likely this agent matches the input\n  detect: (text: string) => number;\n  // Ordered slot keys to collect\n  slots: { key: string; question: string; optional?: boolean }[];\n  // Execute the task and return a final message or an object with attachment\n  execute: (slots: Record<string, string>) => Promise<ExecuteOutput> | ExecuteOutput;\n};\n\nfunction normalize(s: string) {\n  return s.toLowerCase().replace(/[^a-z0-9 ]/g, ' ').replace(/\\s+/g, ' ').trim();\n}\n\n// Catalog helpers\nfunction listAllCatalogTitles(limit?: number) {\n  const apps = catalogData as unknown as { id: string; title: string }[];\n  const arr = apps.map(a => ({ id: a.id, title: a.title }));\n  return typeof limit === 'number' ? arr.slice(0, Math.max(0, limit)) : arr;\n}\n\nfunction searchCatalog(query: string, topN = 5) {\n  const apps = catalogData as unknown as { id: string; title: string }[];\n  const q = normalize(query);\n  const scored = apps.map((a) => {\n    const t = normalize(a.title);\n    let score = 0;\n    if (!q) score = 0;\n    else if (t === q) score = 1.0;\n    else if (t.startsWith(q) || q.startsWith(t)) score = 0.8;\n    else if (t.includes(q) || q.includes(t)) score = 0.6;\n    else {\n      const qt = new Set(q.split(' '));\n      const tt = new Set(t.split(' '));\n      let overlap = 0;\n      qt.forEach((w) => {\n        if (tt.has(w)) overlap++;\n      });\n      if (overlap > 0) score = Math.min(0.4 + overlap * 0.05, 0.55);\n    }\n    return { ...a, score };\n  });\n  const sorted = scored.sort((a, b) => b.score - a.score).slice(0, topN);\n  return sorted.filter((x) => x.score >= 0.4);\n}\n\nfunction shouldListAll(text: string) {\n  const t = normalize(text);\n  if (!t) return false;\n  if (t === 'apps' || t === 'applications') return true;\n  const phrases = [\n    'list all apps', 'list apps', 'list applications', 'all applications', 'all apps',\n    'available applications', 'available apps', 'available application names', 'available app names',\n    'show all apps', 'show applications', 'show me all apps',\n    'app names', 'application names', 'list of apps', 'list of applications',\n    'apps list', 'application list', 'what apps are available', 'what applications are available',\n    'which apps are available', 'which applications are available',\n    'what apps do we have', 'which apps do we have',\n    'give available application names', 'give me app names', 'provide app names'\n  ];\n  if (phrases.some(p => t.includes(p))) return true;\n  // Heuristic: presence of an app word AND a list/ask word\n  const hasAppWord = ['app', 'apps', 'application', 'applications'].some(w => t.includes(w));\n  const hasListWord = ['list', 'available', 'names', 'name', 'show', 'display', 'all', 'what', 'which', 'give', 'provide'].some(w => t.includes(w));\n  return hasAppWord && hasListWord;\n}\n\nconst catalogAgent: Agent = {\n  id: 'catalog.search',\n  name: 'Catalog Search',\n  detect: (text) => {\n    const t = normalize(text);\n    if (!t) return 0;\n    if (shouldListAll(t)) return 0.95;\n    const keywords = ['search', 'find', 'open', 'launch', 'app', 'application', 'catalog', 'apps', 'applications', 'list', 'show'];\n    const hasKw = keywords.some((k) => t.includes(k));\n    const matches = searchCatalog(t, 1).length > 0;\n    if (hasKw && matches) return 0.9;\n    if (hasKw) return 0.6;\n    if (matches) return 0.45; // low score to avoid hijacking generic queries like \"tell me about ashley\"\n    return 0;\n  },\n  slots: [\n    { key: 'query', question: 'What app or capability are you looking for?' },\n    { key: 'topN', question: 'How many results would you like? (default 5, max 10)', optional: true },\n  ],\n  execute: (slots) => {\n    const q = slots.query || '';\n    const n = Math.min(Math.max(parseInt(slots.topN || '5', 10) || 5, 1), 10);\n    if (shouldListAll(q)) {\n      const all = listAllCatalogTitles();\n      const lines = all.map((r, i) => `${i + 1}. ${r.title} (/${r.id})`);\n      return `Available applications (${all.length}):\\n` + lines.join('\\n');\n    }\n    const results = searchCatalog(q, n);\n    if (!results.length) return `I couldn’t find results for “${q}”. Try a different phrase?`;\n    const lines = results.map((r, i) => `${i + 1}. ${r.title} (/${r.id})`);\n    return `Here are the top ${results.length} result(s) for “${q}”:\\n` + lines.join('\\n');\n  },\n};\n\nconst orderAgent: Agent = {\n  id: 'order.status',\n  name: 'Order Status',\n  detect: (text) => {\n    const t = normalize(text);\n    if (!t) return 0;\n    const kw = ['order', 'status', 'track', 'tracking'];\n    const has = kw.some((k) => t.includes(k));\n    const looksId = /\\b(ORD|SO|PO)[- ]?\\d{5,}\\b/.test(text);\n    return has ? (looksId ? 0.9 : 0.65) : 0;\n  },\n  slots: [\n    { key: 'orderId', question: 'What is the order ID?' },\n    { key: 'zip', question: 'Destination ZIP (optional)?', optional: true },\n  ],\n  execute: (slots) => {\n    const id = slots.orderId || 'unknown';\n    // Demo response\n    return `Order ${id} is in transit. ETA: 2–3 business days. Last scan: Little Rock, AR.\\nNeed detailed tracking link?`;\n  },\n};\n\n\n// --- Report generation helpers ---\n\nfunction generateReportDataset(reportType: string, rows = 10): { name: string; headers: string[]; rows: (string|number)[][] } {\n  const t = normalize(reportType);\n  const apps = (catalogData as unknown as { id: string; title: string }[]).map(a => a.title);\n  const now = Date.now();\n  const rand = (min: number, max: number) => Math.floor(min + Math.random() * (max - min + 1));\n\n  if (t.includes('sale')) {\n    const headers = ['date', 'application', 'orders', 'revenue_usd'];\n    const data: (string | number)[][] = Array.from({ length: rows }, (_, i) => {\n      const d = new Date(now - i * 86400000);\n      const app = apps[i % apps.length] || 'Ashley Direct';\n      const orders = rand(10, 180);\n      const revenue = orders * rand(50, 200);\n      return [d.toISOString().slice(0, 10), app, orders, revenue];\n    }).reverse();\n    return { name: 'sales', headers, rows: data };\n  }\n\n  if (t.includes('inventory') || t.includes('stock')) {\n    const headers = ['sku', 'item', 'qty_on_hand', 'reorder_point'];\n    const data: (string | number)[][] = Array.from({ length: rows }, (_, i) => {\n      const sku = `SKU-${1000 + i}`;\n      const item = `Item ${i + 1}`;\n      const qoh = rand(0, 500);\n      const rp = rand(50, 150);\n      return [sku, item, qoh, rp];\n    });\n    return { name: 'inventory', headers, rows: data };\n  }\n\n  // Default generic\n  const headers = ['id', 'name', 'value'];\n  const data: (string | number)[][] = Array.from({ length: rows }, (_, i) => [i + 1, `Row ${i + 1}`, rand(10, 999)]);\n  return { name: t || 'generic', headers, rows: data };\n}\n\n// --- RAG: simple TF-IDF over local knowledgeDocs ---\nfunction tokenize(s: string): string[] {\n  return normalize(s).split(' ').filter(Boolean);\n}\n\nconst ragIndex = (() => {\n  const docs = knowledgeDocs.map(d => ({ id: d.id, title: d.title, text: d.text, tokens: tokenize(d.text) }));\n  const df = new Map<string, number>();\n  const docVec = new Map<string, Map<string, number>>();\n  const docNorm = new Map<string, number>();\n  docs.forEach(d => {\n    const tf = new Map<string, number>();\n    d.tokens.forEach(t => tf.set(t, (tf.get(t) || 0) + 1));\n    tf.forEach((_, t) => df.set(t, (df.get(t) || 0) + 1));\n    docVec.set(d.id, tf);\n  });\n  const N = docs.length || 1;\n  const idf = new Map<string, number>();\n  df.forEach((dfv, t) => idf.set(t, Math.log(1 + N / (dfv || 1))));\n  docVec.forEach((tf, id) => {\n    let sum = 0;\n    tf.forEach((f, t) => {\n      const w = (1 + Math.log(f)) * (idf.get(t) || 0);\n      sum += w * w;\n    });\n    docNorm.set(id, Math.sqrt(sum) || 1);\n  });\n  return { docs, df, idf, docVec, docNorm };\n})();\n\nfunction ragSearch(query: string, k = 3): { id: string; title: string; score: number; snippet: string }[] {\n  const qTok = tokenize(query);\n  const qtf = new Map<string, number>();\n  qTok.forEach(t => qtf.set(t, (qtf.get(t) || 0) + 1));\n  let qsum = 0;\n  const qweights = new Map<string, number>();\n  qtf.forEach((f, t) => {\n    const w = (1 + Math.log(f)) * ((ragIndex.idf.get(t) || 0));\n    if (w > 0) { qweights.set(t, w); qsum += w * w; }\n  });\n  const qnorm = Math.sqrt(qsum) || 1;\n  const scored = ragIndex.docs.map(d => {\n    const tf = ragIndex.docVec.get(d.id)!;\n    let dot = 0;\n    qweights.forEach((qw, t) => {\n      const f = tf.get(t);\n      if (f) {\n        const dw = (1 + Math.log(f)) * ((ragIndex.idf.get(t) || 0));\n        dot += qw * dw;\n      }\n    });\n    const denom = qnorm * (ragIndex.docNorm.get(d.id) || 1);\n    const score = denom ? (dot / denom) : 0;\n    return { id: d.id, title: d.title, score, snippet: d.text.slice(0, 280) + (d.text.length > 280 ? '…' : '') };\n  }).sort((a, b) => b.score - a.score).slice(0, k).filter(r => r.score > 0.01);\n  return scored;\n}\n\nconst knowledgeAgent: Agent = {\n  id: 'knowledge.rag',\n  name: 'Knowledge Q&A',\n  detect: (text) => {\n    const t = normalize(text);\n    if (!t) return 0;\n    const qwords = ['what','how','where','when','why','which','who','tell','about','describe','overview','info','information','explain','guide','docs','document','documentation'];\n    const hasQ = qwords.some(w => t.includes(w)) || /\\b(what is|who is|tell me about|about)\\b/.test(t) || /\\?$/.test(text.trim());\n    return hasQ ? 0.8 : 0.5; // prefer over catalog when it's a general knowledge ask\n  },\n  slots: [\n    { key: 'query', question: 'What would you like to know?' },\n  ],\n  execute: async (slots) => {\n    const q = slots.query || '';\n    try {\n      const res = await fetch('/api/rag/query', { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({ query: q, topK: 5, topSentences: 6 }) });\n      if (!res.ok) throw new Error('RAG query failed');\n      const data = await res.json();\n      const hits = (data?.hits || []) as { url:string; title?:string; text:string; score:number }[];\n      const answer = (data?.answer || '').toString().trim();\n      if (answer && hits.length) {\n        // Comprehensive mode: return synthesized multi-sentence answer\n        return answer;\n      }\n      if (!hits.length) return `I couldn't find anything relevant for \"${q}\". Try rephrasing your question.`;\n      // Fallback: compact list of titles only\n      const lines = hits.map((h, i) => `${i + 1}. ${(h.title || h.url)}`);\n      return `Here are related sources:\\n${lines.join('\\n')}`;\n    } catch {\n      const hits = ragSearch(q, 3);\n      if (!hits.length) return `I couldn't find anything relevant for \"${q}\". Try rephrasing your question.`;\n      const lines = hits.map((h, i) => `${i + 1}. ${h.title} — ${h.snippet}`);\n      return `Here’s what I found:\\n${lines.join('\\n')}\\n\\nSources: ${hits.map((h, i) => '[' + (i + 1) + '] ' + h.title).join('; ')}`;\n    }\n  }\n};\n\n\nconst reportAgent: Agent = {\n  id: 'report.generate',\n  name: 'Report Generator',\n  detect: (text) => {\n    const t = normalize(text);\n    if (!t) return 0;\n    const kws = ['report', 'export', 'summary', 'csv', 'json'];\n    const score = kws.some(k => t.includes(k)) ? 0.85 : 0;\n    return score;\n  },\n  slots: [\n    { key: 'reportType', question: 'What report would you like? (e.g., sales by day, inventory, generic)' },\n    { key: 'range', question: 'What time range? (optional, e.g., last 30 days)', optional: true },\n    { key: 'format', question: 'CSV or JSON? (default CSV)', optional: true },\n    { key: 'rows', question: 'How many sample rows? (default 10)', optional: true },\n  ],\n  execute: (slots) => {\n    const type = (slots.reportType || 'generic').toString();\n    const n = Math.min(Math.max(parseInt((slots.rows || '10').toString(), 10) || 10, 1), 200);\n    const ds = generateReportDataset(type, n);\n    const message = `Generated ${ds.name} report with ${n} sample row(s). Choose a format to download.`;\n    return { message, attachment: { type: 'report', name: ds.name, headers: ds.headers, rows: ds.rows } };\n  },\n};\n\nconst agents: Agent[] = [reportAgent, catalogAgent, orderAgent, knowledgeAgent];\n\nfunction pickAgent(text: string): Agent | null {\n  const scored = agents\n    .map((a) => ({ a, s: a.detect(text) }))\n    .sort((x, y) => y.s - x.s);\n  if (!scored.length || scored[0].s < 0.5) return null;\n  return scored[0].a;\n}\n\nfunction advancePastOptional(agent: Agent, session: AgentSession) {\n  while (true) {\n    const s = agent.slots[session.slotIndex];\n    if (s && s.optional) { session.slotIndex += 1; continue; }\n    break;\n  }\n}\n\nfunction nextQuestion(agent: Agent, session: AgentSession): string | null {\n  const slot = agent.slots[session.slotIndex];\n  return slot ? slot.question : null;\n}\n\nexport async function processUserInput(\n  session: AgentSession | null,\n  userText: string\n): Promise<ProcessResult> {\n  const replies: string[] = [];\n  const text = userText.trim();\n  if (!text) return { replies, session };\n\n  if (!session) {\n    const agent = pickAgent(text);\n    if (!agent) {\n      replies.push(\n        \"I can help with: knowledge Q&A using RAG (ask questions about the shell and apps), generate a report with sample data (e.g., ‘generate sales report CSV 20 rows’), list available applications (e.g., ‘list all apps’), catalog search (e.g., ‘search sales app’), order status (e.g., ‘track order SO12345’).\"\n      );\n      return { replies, session: null };\n    }\n    // Start session and ask first question (unless user already supplied a clear value)\n    const newSession: AgentSession = { agentId: agent.id, slotIndex: 0, slots: {} };\n    // Heuristic: treat initial text as value for first slot if not a generic ask\n    if (agent.id === 'catalog.search') {\n      if (shouldListAll(text)) {\n        const all = listAllCatalogTitles();\n        const lines = all.map((r, i) => `${i + 1}. ${r.title} (/${r.id})`);\n        replies.push(`Available applications (${all.length}):\\n` + lines.join('\\n'));\n        return { replies, session: null };\n      }\n      newSession.slots.query = text;\n      newSession.slotIndex = 1; // move to next (topN is optional)\n      advancePastOptional(agent, newSession);\n    } else if (agent.id === 'order.status') {\n      const m = text.match(/\\b(ORD|SO|PO)[- ]?\\d{5,}\\b/);\n      if (m) {\n        newSession.slots.orderId = m[0].replace(' ', '-');\n        newSession.slotIndex = 1;\n      }\n    } else if (agent.id === 'report.generate') {\n      const lower = text.toLowerCase();\n      if (lower.includes('sales')) newSession.slots.reportType = 'sales';\n      else if (lower.includes('inventory') || lower.includes('stock')) newSession.slots.reportType = 'inventory';\n      else if (lower.includes('report')) newSession.slots.reportType = 'generic';\n      if (lower.includes('json')) newSession.slots.format = 'json';\n      if (lower.includes('csv')) newSession.slots.format = 'csv';\n      const mRows = lower.match(/(\\d+)\\s*(rows?|lines?)/);\n      if (mRows) newSession.slots.rows = mRows[1];\n      if (newSession.slots.reportType) newSession.slotIndex = 1;\n    } else if (agent.id === 'knowledge.rag') {\n      newSession.slots.query = text;\n      newSession.slotIndex = 1;\n    }\n    const ask = nextQuestion(agent, newSession);\n    if (ask) {\n      replies.push(ask);\n      return { replies, session: newSession };\n    }\n    // No more slots to ask -> execute immediately\n    const out = await agent.execute(newSession.slots);\n    if (typeof out === 'string') {\n      replies.push(out);\n      return { replies, session: null };\n    }\n    replies.push(out.message || 'Done.');\n    return { replies, session: null, attachment: out.attachment };\n  }\n\n  const agent = agents.find((a) => a.id === session.agentId)!;\n  // Accept value for current slot\n  const slotDef = agent.slots[session.slotIndex];\n  if (slotDef) {\n    session.slots[slotDef.key] = text;\n    session.slotIndex += 1;\n  }\n  // Skip optional blanks\n  while (true) {\n    const s = agent.slots[session.slotIndex];\n    if (s && s.optional) {\n      // If user typed '-', skip optional slot\n      if ((session.slots[s.key] || '') === '') {\n        // Keep as blank optional\n      }\n      session.slotIndex += 1;\n      continue;\n    }\n    break;\n  }\n\n  advancePastOptional(agent, session);\n  const next = nextQuestion(agent, session);\n  if (next) {\n    replies.push(next);\n    return { replies, session };\n  }\n\n  // Execute\n  const out = await agent.execute(session.slots);\n  if (typeof out === 'string') {\n    replies.push(out);\n    return { replies, session: null };\n  }\n  replies.push(out.message || 'Done.');\n  return { replies, session: null, attachment: out.attachment };\n}\n\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 4050, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/NChinnappan/SourceAI/UI/shell-app/src/components/chat/ChatDock.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useEffect, useRef, useState } from \"react\";\nimport {\n  ChatBubbleLeftRightIcon,\n  XMarkIcon,\n  PaperAirplaneIcon,\n  SparklesIcon,\n  MicrophoneIcon,\n  PaperClipIcon,\n} from \"@heroicons/react/24/outline\";\nimport { processUserInput, type AgentSession, type ReportAttachment } from '@/agents/orchestrator';\n\n\nexport type ChatMessage = {\n  id: string;\n  role: \"user\" | \"assistant\";\n  content: string;\n  ts: number;\n  attachment?: ReportAttachment;\n};\n\nconst STORAGE_KEY = \"chatdock_messages_v1\";\n\nfunction usePersistentMessages() {\n  const [messages, setMessages] = useState<ChatMessage[]>([]);\n  useEffect(() => {\n    if (typeof window === \"undefined\") return;\n    try {\n      const raw = localStorage.getItem(STORAGE_KEY);\n      if (raw) setMessages(JSON.parse(raw));\n    } catch {}\n  }, []);\n  useEffect(() => {\n    if (typeof window === \"undefined\") return;\n    try {\n      localStorage.setItem(STORAGE_KEY, JSON.stringify(messages));\n    } catch {}\n  }, [messages]);\n  return [messages, setMessages] as const;\n}\n\nexport default function ChatDock() {\n  const [open, setOpen] = useState(false);\n  const [session, setSession] = useState<AgentSession | null>(null);\n\n  const [input, setInput] = useState(\"\");\n  const [messages, setMessages] = usePersistentMessages();\n  const listRef = useRef<HTMLDivElement>(null);\n\n  // RAG ingest UI state\n  const [ragDir, setRagDir] = useState(\"\");\n  const [ragBusy, setRagBusy] = useState(false);\n  const [ragMsg, setRagMsg] = useState<string | null>(null);\n  type IngestResult = { url: string; chunks?: number; error?: string };\n  type IngestResponse = { ok: boolean; results: IngestResult[]; error?: string };\n  const ingestDir = async () => {\n    const dir = ragDir.trim();\n    if (!dir) { setRagMsg('Enter a folder path'); return; }\n    setRagBusy(true);\n    setRagMsg(null);\n    try {\n      const res = await fetch('/api/rag/ingest', { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({ dir }) });\n      const data: IngestResponse = await res.json();\n      if (!res.ok || !data.ok) throw new Error(data.error || 'Failed to ingest');\n      const okCount = data.results.filter(r => !r.error).length;\n      const totalChunks = data.results.reduce((acc, r) => acc + (r.chunks || 0), 0);\n      setRagMsg(`Indexed ${okCount} file(s), ${totalChunks} chunk(s).`);\n    } catch (e) {\n      setRagMsg(e instanceof Error ? e.message : String(e));\n    } finally {\n      setRagBusy(false);\n    }\n  };\n\n  // Download helpers for report attachments\n  const toCSV = (headers: string[], rows: (string|number)[][]) => {\n    const esc = (v: string|number) => {\n      const s = String(v);\n      return /[\",\\n]/.test(s) ? '\"' + s.replace(/\"/g, '\"\"') + '\"' : s;\n    };\n    return [headers.join(','), ...rows.map(r => r.map(esc).join(','))].join('\\n');\n  };\n  const triggerDownload = (filename: string, mime: string, data: Blob | string | ArrayBuffer) => {\n    let blob: Blob;\n    if (data instanceof Blob) {\n      blob = data;\n    } else if (typeof data === 'string') {\n      blob = new Blob([data], { type: mime });\n    } else {\n      // ArrayBuffer\n      blob = new Blob([new Uint8Array(data)], { type: mime });\n    }\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = filename;\n    document.body.appendChild(a);\n    a.click();\n    a.remove();\n    URL.revokeObjectURL(url);\n  };\n  const downloadCSV = (att: ReportAttachment) => {\n    const csv = toCSV(att.headers, att.rows);\n    triggerDownload(`${att.name}.csv`, 'text/csv;charset=utf-8', csv);\n  };\n  const downloadJSON = (att: ReportAttachment) => {\n    const objs = att.rows.map(row => Object.fromEntries(att.headers.map((h, i) => [h, row[i] ?? null])));\n    const json = JSON.stringify({ report: att.name, rows: objs }, null, 2);\n    triggerDownload(`${att.name}.json`, 'application/json', json);\n  };\n  const downloadXLSX = async (att: ReportAttachment) => {\n    try {\n      const XLSX = await import('xlsx');\n      const wb = XLSX.utils.book_new();\n      const ws = XLSX.utils.aoa_to_sheet([att.headers, ...att.rows]);\n      XLSX.utils.book_append_sheet(wb, ws, 'Report');\n      const wbout = XLSX.write(wb, { bookType: 'xlsx', type: 'array' });\n      triggerDownload(`${att.name}.xlsx`, 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet', wbout);\n    } catch {\n      alert('Excel export requires the \"xlsx\" package. I can install it if you allow.');\n    }\n  };\n  const downloadDOCX = async (att: ReportAttachment) => {\n    try {\n      const docx = await import('docx');\n      const { Document, Packer, Paragraph, Table, TableRow, TableCell, WidthType } = docx;\n      const headerRow = new TableRow({ children: att.headers.map((h) => new TableCell({ children: [new Paragraph(String(h))] })) });\n      const bodyRows = att.rows.map((r) => new TableRow({ children: r.map((c) => new TableCell({ children: [new Paragraph(String(c))] })) }));\n      const table = new Table({ width: { size: 100, type: WidthType.PERCENTAGE }, rows: [headerRow, ...bodyRows] });\n      const doc = new Document({ sections: [{ properties: {}, children: [new Paragraph(`${att.name} report`), table] }] });\n      const blob = await Packer.toBlob(doc);\n      triggerDownload(`${att.name}.docx`, 'application/vnd.openxmlformats-officedocument.wordprocessingml.document', blob);\n    } catch {\n      alert('Word export requires the \"docx\" package. I can install it if you allow.');\n    }\n  };\n  const downloadPDF = async (att: ReportAttachment) => {\n    try {\n      const jsPDFMod = await import('jspdf');\n      const JsPDF = jsPDFMod.default;\n      try { await import('jspdf-autotable'); } catch {}\n      const doc = new JsPDF();\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      if ((doc as any).autoTable) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        (doc as any).autoTable({ head: [att.headers], body: att.rows });\n      } else {\n        doc.text(`${att.name} report`, 14, 16);\n        let y = 26;\n        const text = toCSV(att.headers, att.rows);\n        text.split('\\n').slice(0, 50).forEach((line) => { doc.text(line, 14, y); y += 6; });\n      }\n      doc.save(`${att.name}.pdf`);\n    } catch {\n      alert('PDF export requires \"jspdf\" (and optionally \"jspdf-autotable\"). I can install them if you allow.');\n    }\n  };\n\n\n  useEffect(() => {\n    if (!open) return;\n    const el = listRef.current;\n    if (el) el.scrollTop = el.scrollHeight;\n  }, [open, messages.length]);\n\n  const send = async () => {\n    const text = input.trim();\n    if (!text) return;\n    const user: ChatMessage = { id: crypto.randomUUID(), role: \"user\", content: text, ts: Date.now() };\n    const typing: ChatMessage = { id: crypto.randomUUID(), role: \"assistant\", content: \"…\", ts: Date.now() };\n    setMessages((prev) => [...prev, user, typing]);\n    setInput(\"\");\n\n    // Agentic processing with slot-filling (async)\n    const result = await processUserInput(session, text);\n    setSession(result.session);\n    const reply = (result.replies && result.replies.length) ? result.replies.join(\"\\n\") : \"Okay.\";\n\n    setTimeout(() => {\n      setMessages((prev) => prev.map((m) => (m === typing ? { ...m, content: reply, attachment: result.attachment } : m)));\n    }, 500);\n  };\n\n  return (\n    <div className=\"pointer-events-none\">\n      {/* Floating toggle button */}\n      <button\n        aria-label=\"Open chatbot\"\n        onClick={() => setOpen((v) => !v)}\n        className=\"pointer-events-auto fixed bottom-6 right-6 z-50 inline-flex items-center justify-center w-14 h-14 rounded-full shadow-lg bg-[var(--primary)] text-white hover:shadow-xl active:scale-95 transition-all\"\n      >\n        {open ? <XMarkIcon className=\"w-6 h-6\" /> : <ChatBubbleLeftRightIcon className=\"w-6 h-6\" />}\n      </button>\n\n      {/* Panel */}\n      <div\n        className={`pointer-events-auto fixed bottom-24 right-6 z-50 w-[360px] sm:w-[400px] ${\n          open ? \"opacity-100 translate-y-0\" : \"opacity-0 translate-y-4 pointer-events-none\"\n        } transition-all duration-300`}\n      >\n        <div className=\"rounded-2xl overflow-hidden shadow-2xl ring-1 ring-black/10 bg-white/90 backdrop-blur\">\n          {/* Header */}\n          <div className=\"flex items-center justify-between px-4 py-3 border-b border-gray-200\">\n            <div className=\"flex items-center gap-2\">\n              <div className=\"w-7 h-7 rounded-lg brand-soft brand-text flex items-center justify-center\">\n                <SparklesIcon className=\"w-4 h-4\" />\n              </div>\n              <div className=\"text-sm font-semibold text-gray-900\">Ashley AI</div>\n            </div>\n            <button onClick={() => setOpen(false)} className=\"p-1 rounded hover:bg-gray-100\">\n              <XMarkIcon className=\"w-5 h-5 text-gray-500\" />\n            </button>\n          </div>\n\n          {/* RAG ingest panel */}\n          <div className=\"px-4 py-2 border-b border-gray-200 bg-gray-50/60\">\n            <div className=\"text-[11px] text-gray-600 mb-1\">RAG: Ingest from folder</div>\n            <div className=\"flex gap-2\">\n              <input\n                value={ragDir}\n                onChange={(e) => setRagDir(e.target.value)}\n                placeholder=\"C:\\\\Users\\\\NChinnappan\\\\Downloads\\\\data feed\"\n                className=\"flex-1 bg-white/90 border border-gray-200 rounded-lg px-2 py-1 text-xs outline-none focus:ring-2 focus:ring-[var(--ring)]\"\n              />\n              <button\n                onClick={ingestDir}\n                disabled={ragBusy}\n                className=\"px-2 py-1 text-xs rounded-md bg-[var(--primary)] text-white disabled:opacity-50\"\n              >\n                {ragBusy ? 'Indexing…' : 'Index'}\n              </button>\n            </div>\n            {ragMsg && <div className=\"mt-1 text-[11px] text-gray-600\">{ragMsg}</div>}\n          </div>\n\n          {/* Messages */}\n          <div ref={listRef} className=\"max-h-[50vh] overflow-y-auto px-3 py-3 space-y-3\">\n            {messages.length === 0 ? (\n              <div className=\"text-xs text-gray-500 px-2 py-6 text-center\">\n                Ask anything. This is a UI shell; responses are simulated.\n              </div>\n            ) : (\n              messages.map((m) => (\n                <div key={m.id} className={`flex ${m.role === \"user\" ? \"justify-end\" : \"justify-start\"}`}>\n                  <div\n                    className={`px-3 py-2 text-sm rounded-2xl max-w-[80%] shadow-sm transition-all ${\n                      m.role === \"user\"\n                        ? \"bg-[var(--primary)] text-white rounded-br-sm\"\n                        : \"bg-gray-100 text-gray-800 rounded-bl-sm\"\n                    }`}\n                  >\n                    <div>{m.content}</div>\n                    {m.role === 'assistant' && m.attachment?.type === 'report' && (\n                      <div className=\"mt-2 flex flex-wrap gap-2\">\n                        <button onClick={() => downloadCSV(m.attachment!)} className=\"px-2 py-1 text-xs rounded-md bg-white/70 hover:bg-white text-gray-800 border border-gray-200 shadow-sm\">CSV</button>\n                        <button onClick={() => downloadJSON(m.attachment!)} className=\"px-2 py-1 text-xs rounded-md bg-white/70 hover:bg-white text-gray-800 border border-gray-200 shadow-sm\">JSON</button>\n                        <button onClick={() => downloadXLSX(m.attachment!)} className=\"px-2 py-1 text-xs rounded-md bg-white/70 hover:bg-white text-gray-800 border border-gray-200 shadow-sm\">Excel</button>\n                        <button onClick={() => downloadDOCX(m.attachment!)} className=\"px-2 py-1 text-xs rounded-md bg-white/70 hover:bg-white text-gray-800 border border-gray-200 shadow-sm\">Word</button>\n                        <button onClick={() => downloadPDF(m.attachment!)} className=\"px-2 py-1 text-xs rounded-md bg-white/70 hover:bg-white text-gray-800 border border-gray-200 shadow-sm\">PDF</button>\n                      </div>\n                    )}\n                  </div>\n                </div>\n              ))\n            )}\n          </div>\n\n          {/* Composer */}\n          <div className=\"px-3 pb-3\">\n            <div className=\"relative flex items-center gap-2 bg-white/80 backdrop-blur border border-gray-200 rounded-2xl px-3 py-2 shadow-sm focus-within:ring-2 focus-within:ring-[var(--ring)] transition-all\">\n              <button className=\"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-all\" title=\"Attach\">\n                <PaperClipIcon className=\"w-5 h-5\" />\n              </button>\n              <input\n                value={input}\n                onChange={(e) => setInput(e.target.value)}\n                onKeyDown={(e) => { if (e.key === 'Enter') { e.preventDefault(); send(); } }}\n                placeholder=\"Message Ashley AI\"\n                className=\"flex-1 bg-transparent outline-none text-sm placeholder-gray-500\"\n              />\n              <button className=\"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-all\" title=\"Voice\">\n                <MicrophoneIcon className=\"w-5 h-5\" />\n              </button>\n              <button\n                onClick={send}\n                className=\"inline-flex items-center gap-1 bg-[var(--primary)] text-white text-sm px-3 py-1.5 rounded-xl shadow hover:shadow-md active:scale-95 transition-all\"\n                title=\"Send\"\n              >\n                <PaperAirplaneIcon className=\"w-4 h-4\" />\n                Send\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 4697, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/NChinnappan/SourceAI/UI/shell-app/src/components/layout/ShellLayout.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState } from 'react';\nimport { Sidebar } from './Sidebar';\nimport { Header } from './Header';\nimport { MainContent } from './MainContent';\nimport dynamic from 'next/dynamic';\nimport SearchHistoryDrawer from './SearchHistoryDrawer';\nimport ChatDock from '../chat/ChatDock';\nimport { MegaphoneIcon, EnvelopeIcon, UserGroupIcon, ChatBubbleLeftRightIcon, Squares2X2Icon, BellIcon } from '@heroicons/react/24/outline';\n\nconst NotificationTray = dynamic(() => import('./NotificationTray'), { ssr: false });\nconst AshleyDirectInfo = dynamic(() => import('../departments/AshleyDirectInfo'), { ssr: false });\nconst AshleyDirectMenus = dynamic(() => import('../departments/AshleyDirectMenus'), { ssr: false });\n\ninterface ShellLayoutProps {\n  children?: React.ReactNode;\n  initialSelectedDepartment?: string | null;\n  suppressDefault?: boolean; // when true, do not render MainContent/department, only children\n  hideRightPanel?: boolean; // when true, hide notifications/quick links panel\n}\n\nexport function ShellLayout({ children, initialSelectedDepartment = null, suppressDefault = false, hideRightPanel = false }: ShellLayoutProps) {\n  const [selectedDepartment, setSelectedDepartment] = useState<string | null>(initialSelectedDepartment);\n  const [historyOpen, setHistoryOpen] = useState(false);\n\n\n  return (\n    <div className=\"flex h-screen bg-gray-50\">\n      {/* Sidebar */}\n      <Sidebar\n        selectedDepartment={selectedDepartment}\n        onDepartmentSelect={setSelectedDepartment}\n        onPlusClick={() => setHistoryOpen(true)}\n      />\n\n      {/* Main Content Area */}\n      <div className=\"flex-1 flex flex-col overflow-hidden\">\n        <Header />\n        <main className=\"relative flex-1 overflow-hidden\">\n          <div className=\"h-full flex\">\n            {/* Primary content area */}\n            <div className=\"flex-1 overflow-auto\">\n              {!suppressDefault && (\n                selectedDepartment ? (\n                  <div className=\"h-full\">\n                    {/* This is where remote microfrontends will be loaded */}\n                    <div className=\"p-6 space-y-4\">\n                      <h2 className=\"text-2xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-gray-900 to-gray-700\">\n                        {selectedDepartment === 'ashleydirect' ? 'Ashley Direct' : (selectedDepartment.charAt(0).toUpperCase() + selectedDepartment.slice(1))} Department\n                      </h2>\n\n                      {/* Department intro sections */}\n                      {selectedDepartment === 'ashleydirect' && (\n                        <>\n                          <AshleyDirectInfo />\n                          <AshleyDirectMenus />\n                        </>\n                      )}\n\n                      <p className=\"text-gray-600\">\n                        Loading {selectedDepartment} application...\n                      </p>\n                    </div>\n                  </div>\n                ) : (\n                  <MainContent />\n                )\n              )}\n              {children}\n            </div>\n\n            {/* Right panel after header */}\n            {!hideRightPanel && (\n              <aside className=\"hidden lg:block w-72 shrink-0 border-l border-gray-200 bg-white/60 backdrop-blur supports-[backdrop-filter]:bg-white/50 h-full overflow-y-auto\">\n                <div className=\"pt-8 px-3 pb-24 space-y-3\">\n                  <div className=\"relative px-1\">\n                    {/* soft glow behind the pill */}\n                    <div className=\"pointer-events-none absolute left-0 right-0 -top-1 h-8 mx-2 rounded-full blur-xl\" style={{ background: 'var(--primary)', opacity: 0.18 }} />\n                    {/* gradient pill label */}\n                    <div className=\"inline-flex items-center gap-2 px-3 py-1.5 rounded-full bg-gradient-to-r from-[var(--primary)] to-indigo-500 text-white text-xs font-semibold shadow-sm ring-1 ring-white/10\">\n                      <BellIcon className=\"w-4 h-4 opacity-95\" />\n                      <span>Notifications</span>\n                      <span className=\"ml-1 inline-flex\"><span className=\"w-1.5 h-1.5 rounded-full bg-white/90 animate-pulse\" /></span>\n                    </div>\n                  </div>\n\n                  <NotificationTray embedded controls showClose />\n\n                  {/* Announcements */}\n                  <section className=\"mt-4 bg-white rounded-xl shadow-sm ring-1 ring-gray-200/70 p-4\">\n                    <div className=\"flex items-center gap-2\">\n                      <div className=\"h-7 w-7 rounded-full brand-soft brand-text flex items-center justify-center\">\n                        <MegaphoneIcon className=\"w-4 h-4\" />\n                      </div>\n                      <h3 className=\"text-sm font-semibold\" style={{ color: '#0f172a' }}>Announcements</h3>\n                    </div>\n                    <div className=\"mt-3 p-3 rounded-lg brand-soft\" style={{ color: '#0f172a' }}>\n                      <div className=\"text-sm font-semibold\">System Maintenance Scheduled</div>\n                      <div className=\"text-xs mt-1\" style={{ opacity: 0.8 }}>This Sunday from 2 AM to 4 AM.</div>\n                    </div>\n                  </section>\n\n                  {/* Quick Links */}\n                  <section className=\"mt-4 bg-white rounded-xl shadow-sm ring-1 ring-gray-200/70 p-4\">\n                    <h3 className=\"text-sm font-semibold mb-3\" style={{ color: '#0f172a' }}>Quick Links</h3>\n                    <div className=\"grid grid-cols-2 gap-3\">\n                      <a href=\"#\" className=\"flex items-center gap-2 rounded-lg brand-soft px-3 py-2 hover:opacity-90\">\n                        <EnvelopeIcon className=\"w-5 h-5 brand-text\" />\n                        <span className=\"text-sm\" style={{ color: '#0f172a' }}>Outlook</span>\n                      </a>\n                      <a href=\"#\" className=\"flex items-center gap-2 rounded-lg brand-soft px-3 py-2 hover:opacity-90\">\n                        <UserGroupIcon className=\"w-5 h-5 brand-text\" />\n                        <span className=\"text-sm\" style={{ color: '#0f172a' }}>Teams</span>\n                      </a>\n                      <a href=\"#\" className=\"flex items-center gap-2 rounded-lg brand-soft px-3 py-2 hover:opacity-90\">\n                        <ChatBubbleLeftRightIcon className=\"w-5 h-5 brand-text\" />\n                        <span className=\"text-sm\" style={{ color: '#0f172a' }}>Slack</span>\n                      </a>\n                      <a href=\"#\" className=\"flex items-center gap-2 rounded-lg brand-soft px-3 py-2 hover:opacity-90\">\n                        <Squares2X2Icon className=\"w-5 h-5 brand-text\" />\n                        <span className=\"text-sm\" style={{ color: '#0f172a' }}>Trello</span>\n                      </a>\n                    </div>\n                  </section>\n\n                  {/* Sales (month-wise) */}\n                  <section className=\"mt-4 bg-white rounded-xl shadow-sm ring-1 ring-gray-200/70 p-4\">\n                    <h3 className=\"text-sm font-semibold mb-3\" style={{ color: '#0f172a' }}>Sales (last 12 months)</h3>\n                    {(() => {\n                      const data = [\n                        { m: 'J', v: 120 }, { m: 'F', v: 160 }, { m: 'M', v: 180 }, { m: 'A', v: 140 },\n                        { m: 'M', v: 200 }, { m: 'J', v: 230 }, { m: 'J', v: 190 }, { m: 'A', v: 210 },\n                        { m: 'S', v: 260 }, { m: 'O', v: 240 }, { m: 'N', v: 220 }, { m: 'D', v: 280 },\n                      ];\n                      const max = Math.max(...data.map(d => d.v)) || 1;\n                      return (\n                        <div>\n                          <div className=\"h-24 flex items-end gap-1\">\n                            {data.map((d, i) => (\n                              <div key={i} className=\"flex-1 flex flex-col items-center\">\n                                <div className=\"w-full rounded-t-md\" style={{ height: `${Math.max(6, Math.round((d.v / max) * 90))}px`, background: 'var(--primary)', opacity: 0.8 }} />\n                                <div className=\"text-[10px] text-gray-500 mt-1\">{d.m}</div>\n                              </div>\n                            ))}\n                          </div>\n                          <div className=\"mt-2 text-[11px] text-gray-600\">Total YTD: <span className=\"font-semibold text-gray-800\">${[...data].reduce((a, b) => a + b.v, 0).toLocaleString()}</span></div>\n                        </div>\n                      );\n                    })()}\n                  </section>\n\n                  {/* Logistics status */}\n                  <section className=\"mt-4 bg-white rounded-xl shadow-sm ring-1 ring-gray-200/70 p-4\">\n                    <h3 className=\"text-sm font-semibold mb-3\" style={{ color: '#0f172a' }}>Logistics</h3>\n                    <div className=\"flex items-center justify-between text-sm\">\n                      <div className=\"flex items-center gap-2\">\n                        <span className=\"inline-flex items-center justify-center w-6 h-6 rounded-md brand-soft\">\n                          <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" className=\"w-4 h-4 brand-text\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"1.5\" d=\"M3 7h11v10H3zM14 10h4.586a2 2 0 0 1 1.414.586l.414.414A2 2 0 0 1 21 12.414V17h-7v-7zM5 19a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm12 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2z\"/></svg>\n                        </span>\n                        <span>Trucks in transit</span>\n                      </div>\n                      <div className=\"font-semibold\" style={{ color: '#0f172a' }}>18</div>\n                    </div>\n                    <div className=\"mt-3 text-[12px] text-gray-700\">Container ships</div>\n                    <div className=\"mt-1 flex flex-wrap gap-2\">\n                      <span className=\"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-[11px] bg-blue-50 text-blue-700 border border-blue-200\">\n                        <span className=\"w-2 h-2 rounded-full bg-blue-500\" /> On water: 3\n                      </span>\n                      <span className=\"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-[11px] bg-emerald-50 text-emerald-700 border border-emerald-200\">\n                        <span className=\"w-2 h-2 rounded-full bg-emerald-500\" /> At port: 1\n                      </span>\n                      <span className=\"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-[11px] bg-amber-50 text-amber-700 border border-amber-200\">\n                        <span className=\"w-2 h-2 rounded-full bg-amber-500\" /> Customs: 1\n                      </span>\n                      <span className=\"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-[11px] bg-rose-50 text-rose-700 border border-rose-200\">\n                        <span className=\"w-2 h-2 rounded-full bg-rose-500\" /> Delayed: 1\n                      </span>\n                    </div>\n                  </section>\n\n                </div>\n              </aside>\n            )}\n          </div>\n        </main>\n        <SearchHistoryDrawer open={historyOpen} onClose={() => setHistoryOpen(false)} />\n        <ChatDock />\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}