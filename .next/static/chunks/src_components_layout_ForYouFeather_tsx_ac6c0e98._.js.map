{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/NChinnappan/SourceAI/UI/shell-app/src/components/layout/ForYouFeather.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useEffect, useMemo, useRef, useState } from \"react\";\n\n\n\ninterface CardItem {\n  id: string;\n  title: string;\n  image: string;\n}\n\n// Guard against hydration issues by only rendering after mount\nfunction useMounted() {\n  const [mounted, setMounted] = useState(false);\n  useEffect(() => setMounted(true), []);\n  return mounted;\n}\n\nconst CATALOG: CardItem[] = [\n  { id: \"ashleydirect\", title: \"Ashley Direct\", image: \"\" },\n  { id: \"ashleynet\", title: \"Ashley Net\", image: \"\" },\n  { id: \"supplier\", title: \"Supplier\", image: \"\" },\n  { id: \"hr\", title: \"HR\", image: \"\" },\n  { id: \"payroll\", title: \"Payroll\", image: \"\" },\n  { id: \"finance\", title: \"Finance\", image: \"\" },\n  { id: \"transportation\", title: \"Transportation\", image: \"\" },\n  { id: \"as400\", title: \"AS400\", image: \"\" },\n  { id: \"highjump\", title: \"High Jump\", image: \"\" },\n  { id: \"moreapps\", title: \"More Apps\", image: \"\" },\n];\n\nfunction clamp01(x: number) { return Math.max(0, Math.min(1, x)); }\nfunction easeOutCubic(t: number) { return 1 - Math.pow(1 - t, 3); }\nfunction getCols(w: number) {\n  if (w >= 1280) return 5;\n  if (w >= 1024) return 4;\n  if (w >= 768) return 3;\n  return 2;\n}\n\nexport default function ForYouFeather() {\n  const containerRef = useRef<HTMLDivElement | null>(null);\n  const [progress, setProgress] = useState(0); // 0 = collapsed, 1 = fully fanned\n  // Use a fixed initial width to keep SSR/CSR markup identical; update after mount\n  const [viewportW, setViewportW] = useState<number>(1200);\n  const [containerW, setContainerW] = useState<number>(1200);\n\n  // Compute progress based on scroll within a pinned (sticky) stage\n  useEffect(() => {\n    let raf = 0;\n\n    const getScrollParent = (node: HTMLElement | null): HTMLElement | Window => {\n      let p: HTMLElement | null = node?.parentElement || null;\n      while (p) {\n        const style = getComputedStyle(p);\n        if (/(auto|scroll|overlay)/.test(style.overflowY)) return p;\n        p = p.parentElement;\n      }\n      return window;\n    };\n\n    const onScroll = () => {\n      if (raf) cancelAnimationFrame(raf);\n      raf = requestAnimationFrame(() => {\n        const el = containerRef.current;\n        if (!el) return;\n        const rect = el.getBoundingClientRect();\n        const vh = window.innerHeight || 800;\n        const total = Math.max(1, rect.height - vh); // amount of scrollable space while sticky\n        const scrolled = Math.min(total, Math.max(0, -rect.top));\n        const raw = scrolled / total;\n        setProgress(clamp01(raw));\n      });\n    };\n\n    const target: HTMLElement | Window = getScrollParent(containerRef.current);\n    onScroll();\n    target.addEventListener(\"scroll\", onScroll as EventListener, { passive: true } as AddEventListenerOptions);\n    window.addEventListener(\"resize\", onScroll);\n    return () => {\n      if (raf) cancelAnimationFrame(raf);\n      target.removeEventListener(\"scroll\", onScroll as EventListener);\n      window.removeEventListener(\"resize\", onScroll);\n    };\n  }, []);\n\n  const items = useMemo(() => CATALOG.slice(0, 10), []);\n  const mid = Math.floor(items.length / 2);\n  const openT = clamp01(progress * 2);      // 0..1 — fan open\n  const gridT = clamp01((progress - 0.5) * 2); // 0..1 — morph to grid\n  const openEase = easeOutCubic(openT);\n  // Start with full grid layout on initial load, then animate to fan on scroll\n  const initialGridT = Math.max(0, 1 - progress * 4); // 1 at start → 0 when scroll begins\n  const finalGridT = gridT; // normal grid phase at end\n  const currentGridT = Math.max(initialGridT, finalGridT);\n\n  // Fan is only active in the middle phase (when not in grid mode)\n  const fanT = currentGridT > 0 ? 0 : openEase;\n  // Titles fade in during the first phase; ensure visible in grid phase\n  const captionT = clamp01((openT - 0.2) / 0.8);\n  const captionOpacity = Math.max(captionT, gridT);\n\n  // Grid layout params (virtual grid inside sticky)\n  const cols = getCols(viewportW);\n  const gap = 16; // px\n  const cardW = 220; const cardH = 320; // include caption approx\n  // Compute full-width spacing so initial layout stretches edge-to-edge inside container\n  const cw = containerW || Math.min(viewportW, 1280);\n  const sidePad = 32; // increased edge padding\n  const effW = Math.max(0, cw - sidePad * 2);\n  const gridStartX = -effW / 2 + cardW / 2;\n  const gridSpacingX = cols > 1 ? (effW - cardW) / (cols - 1) : 0;\n  const baseY = 24; // more space under the “For You” pill\n\n  // Track viewport width for responsive columns\n  useEffect(() => {\n    const onR = () => setViewportW(window.innerWidth);\n    onR();\n    window.addEventListener('resize', onR);\n    return () => window.removeEventListener('resize', onR);\n  }, []);\n\n  // Measure container width to stretch the initial layout to full width\n  useEffect(() => {\n    const measure = () => {\n      const el = containerRef.current;\n      if (el) setContainerW(el.clientWidth);\n    };\n    measure();\n    window.addEventListener('resize', measure);\n    return () => window.removeEventListener('resize', measure);\n  }, []);\n\n  return (\n    <section aria-label=\"For You feather\" className=\"relative max-w-7xl mx-auto pt-4 pb-8\">\n      {/* Optional title row */}\n      <div className=\"flex items-center justify-center mb-[10px]\">\n        <div className=\"px-3 py-1 rounded-full bg-gray-100 border border-gray-200 text-gray-600 text-xs font-medium\">For You</div>\n      </div>\n\n      {/* Feather stage pinned with sticky to complete the animation before passing */}\n      <div ref={containerRef} className=\"relative h-[200vh] w-full\">\n        <div className=\"sticky top-0 h-screen\">\n          <div className=\"absolute inset-0 flex justify-center items-start pt-1\">\n            {/* Stack all cards centered and fan them out via transform */}\n            {items.map((card, j) => {\n              const k = j - mid; // negative = left, positive = right\n              const side = Math.sign(k) || 0;\n              const abs = Math.abs(k);\n              // Base geometry\n              const baseSpread = 56 + abs * 24; // px\n              // Phase 1: fan open (0 -> 0.5); Phase 2: merge to single (0.5 -> 1)\n              const angleFan = side * (8 + abs * 2) * fanT; // deg\n              const txFan = side * baseSpread * fanT; // px\n              const tyFan = Math.min(12 + abs * 6, 60) * fanT; // px downward a bit\n              // Compute target grid position (col/row)\n              const idx = j;\n              const col = idx % cols;\n              const row = Math.floor(idx / cols);\n              const gx = gridStartX + col * gridSpacingX;\n              const gy = baseY + row * (cardH + gap);\n\n              // Interpolate: initial grid -> fan -> final grid\n              const centerCol = (cols - 1) / 2;\n              const angleGrid = (col - centerCol) * 2; // weaker initial tilt\n              const angle = angleFan * (1 - currentGridT) + angleGrid * currentGridT;\n              const tx = txFan * (1 - currentGridT) + gx * currentGridT;\n              const ty = tyFan * (1 - currentGridT) + gy * currentGridT;\n              const z = currentGridT > 0 ? 1000 - (row * cols + col) : 100 - abs;\n              const s = 1; // keep uniform scale in grid\n              const initialOffset = abs * 2; // small offset so collapsed state hints at layers\n\n              const transform = `translate3d(${tx}px, ${ty + initialOffset}px, 0) rotate(${angle}deg) scale(${s})`;\n\n            return (\n              <figure\n                key={card.id}\n                className=\"absolute will-change-transform select-none cursor-pointer\"\n                style={{\n                  transform,\n                  transition: \"transform 420ms cubic-bezier(.22,1,.36,1), opacity 320ms ease\",\n                  zIndex: z,\n                  opacity: 1,\n                  pointerEvents: 'auto',\n                }}\n              >\n                <Link href={`/apps/${card.id}`} className=\"overflow-hidden rounded-xl bg-white shadow-[0_1px_2px_rgba(16,24,40,.06)] ring-1 ring-gray-200/70 block focus:outline-none focus:ring-2 focus:ring-blue-400/50\">\n                  {/* Application tile instead of image */}\n                  <div className=\"w-[220px] h-[220px] flex items-center justify-center bg-gradient-to-br from-gray-50 to-gray-100 hover:bg-gray-100\">\n                    <div className=\"w-16 h-16 rounded-xl bg-blue-100 text-blue-700 flex items-center justify-center text-xl font-semibold\">\n                      {card.title.split(' ').map(w => w[0]).join('').slice(0,3).toUpperCase()}\n                    </div>\n                  </div>\n                  <figcaption className=\"px-3 py-2 text-[12px] font-medium text-gray-800 line-clamp-2\" style={{ opacity: Math.max(captionOpacity, currentGridT) }}>\n                    {card.title}\n                  </figcaption>\n                </Link>\n              </figure>\n            );\n          })}\n        </div>\n      </div>\n    </div>\n\n    </section>\n  );\n}\n\n"],"names":[],"mappings":"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","debugId":null}}]
}